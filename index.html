<!doctype html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ã¤ã¾ã‚‰ãªã„ãŠä¸–è©±ã‚²ãƒ¼ãƒ </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 20px;
      font-family: 'Hiragino Sans', 'Yu Gothic', system-ui, sans-serif;
      background: radial-gradient(circle at top, #ffe4f3 0%, #fff6e5 45%, #ffeecf 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .container {
      max-width: 960px;
      width: 100%;
      margin: 0 auto;
      background: #fff7e9;
      border-radius: 24px;
      padding: 24px 20px 22px;
      box-shadow: 0 14px 40px rgba(0, 0, 0, 0.16);
    }

    .header {
      text-align: center;
      margin-bottom: 18px;
    }

    .main-title {
      font-size: 1.9rem;
      color: #7b3a2e;
      margin-bottom: 6px;
      font-weight: 800;
    }

    .subtitle {
      font-size: 0.9rem;
      color: #a06340;
      margin-bottom: 4px;
    }

    .hint {
      font-size: 0.78rem;
      color: #b07a52;
      opacity: 0.9;
    }

    @media (max-width: 640px) {
      .container {
        padding: 18px 14px 16px;
      }

      .main-title {
        font-size: 1.5rem;
      }
    }

    /* ä¸Šæ®µï¼šã¤ã¾ã‚‰ãªã„åº¦ãƒ¡ãƒ¼ã‚¿ãƒ¼ï¼‹ã‚­ãƒ£ãƒ©æˆé•· */
    .top-row {
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr);
      gap: 16px;
      margin-bottom: 14px;
    }

    @media (max-width: 720px) {
      .top-row {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .card {
      background: #fffaf2;
      border-radius: 18px;
      padding: 16px 16px 14px;
      border: 2px solid #f0d2aa;
      box-shadow: 0 4px 14px rgba(0, 0, 0, 0.06);
    }

    .card h2 {
      margin: 0 0 10px;
      font-size: 1rem;
      color: #7b3a2e;
      display: flex;
      align-items: center;
      gap: 4px;
      font-weight: 700;
    }

    /* ã¤ã¾ã‚‰ãªã„åº¦ãƒ¡ãƒ¼ã‚¿ãƒ¼ */
    .meter-container {
      margin-top: 4px;
    }

    .meter-bar {
      width: 100%;
      height: 18px;
      background: #f3e3cf;
      border-radius: 999px;
      overflow: hidden;
      margin-bottom: 6px;
    }

    .meter-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #f9c0ff 0%, #ffc46b 40%, #ff7f7f 100%);
      transition: width 0.35s ease;
    }

    .meter-label {
      font-size: 0.82rem;
      font-weight: 600;
      color: #7b3a2e;
    }

    .meter-sub {
      font-size: 0.75rem;
      color: #a56c49;
      margin-top: 4px;
    }

    /* ã‚­ãƒ£ãƒ©æˆé•· */
    .character-growth {
      text-align: center;
    }

    .character-area {
      margin-top: 4px;
      background: #fff5e5;
      border-radius: 14px;
      padding: 10px 10px 8px;
      border: 1px solid #f0d2aa;
    }

    .character-display {
      font-size: 3.4rem;
      margin: 8px 0 4px;
      transition: transform 0.35s ease;
    }

    .character-status {
      font-size: 0.92rem;
      font-weight: 700;
      color: #7b3a2e;
      margin-bottom: 4px;
    }

    .growth-progress {
      margin: 4px 0 4px;
    }

    .progress-bar {
      width: 100%;
      height: 10px;
      background: #f3e3cf;
      border-radius: 999px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #ffc9de, #ffc46b);
      transition: width 0.3s ease;
    }

    .growth-stage {
      font-size: 0.78rem;
      color: #a56c49;
      margin-top: 3px;
    }

    .character-message {
      font-size: 0.8rem;
      color: #a56c49;
      margin: 4px 0 0;
      min-height: 2.1em;
    }

    /* ä¸‹æ®µï¼šç¾åœ¨ã®ã¤ã¾ã‚‰ãªã„ãŠä¸–è©± */
    .current-card {
      margin-top: 6px;
    }

    .game-title {
      font-size: 1rem;
      font-weight: 700;
      color: #7b3a2e;
      margin: 0 0 8px;
      text-align: left;
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 8px;
    }

    .game-title span {
      font-size: 0.8rem;
      font-weight: 500;
      color: #b07a52;
      white-space: nowrap;
    }

    .game-area {
      background: #fffdf7;
      border-radius: 14px;
      padding: 10px 10px 8px;
      border: 1px solid #f0d2aa;
    }

    .status {
      font-size: 0.9rem;
      color: #543123;
      margin: 0 0 6px;
      line-height: 1.5;
    }

    .task-hint {
      font-size: 0.78rem;
      color: #b07a52;
      margin: 0 0 8px;
    }

    .care-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 6px;
    }

    .btn {
      background: #ffcbdd;
      color: #5a2830;
      border: none;
      padding: 7px 10px;
      border-radius: 999px;
      cursor: pointer;
      font-size: 0.85rem;
      transition: background 0.15s ease, transform 0.05s ease, box-shadow 0.05s ease, opacity 0.15s ease;
      white-space: nowrap;
    }

    .btn:nth-child(2) {
      background: #ffe3b8;
    }

    .btn:nth-child(3) {
      background: #daf3c4;
    }

    .btn:hover:enabled {
      background: #ffd7e7;
      transform: translateY(-1px);
      box-shadow: 0 3px 7px rgba(0, 0, 0, 0.16);
    }

    .btn:active:enabled {
      transform: translateY(0);
      box-shadow: none;
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: default;
      box-shadow: none;
    }

    .care-buttons.disabled .btn {
      opacity: 0.5;
      cursor: default;
      box-shadow: none;
      transform: none;
    }

    .log-message {
      font-size: 0.78rem;
      color: #a56c49;
      min-height: 1.4em;
    }

    .result-box {
      font-size: 0.82rem;
      color: #543123;
      margin-top: 6px;
      padding-top: 6px;
      border-top: 1px dashed #e0c09a;
      display: none;
    }

    .result-box ul {
      padding-left: 1.2em;
      margin: 4px 0;
    }

    .small-btn {
      font-size: 0.78rem;
      padding: 6px 10px;
      margin-top: 4px;
    }

    footer {
      margin-top: 8px;
      text-align: center;
      font-size: 0.72rem;
      color: #a56c49;
      opacity: 0.8;
    }

    /* ãƒŸãƒ‹ã‚²ãƒ¼ãƒ ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆä¸Šã‹ã‚‰è½ã¡ã¦ãã‚‹ã‚‚ã®ã‚’å–ã‚‹ï¼‰ */
    .analysis-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.55);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      padding: 12px;
    }

    .analysis-content {
      background: #fffaf4;
      border-radius: 20px;
      padding: 16px 16px 14px;
      max-width: 420px;
      width: 100%;
      text-align: left;
      border: 2px solid #f0d2aa;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    }

    .analysis-title {
      font-size: 1rem;
      color: #7b3a2e;
      margin-bottom: 6px;
      font-weight: 700;
    }

    .mini-caption {
      font-size: 0.8rem;
      color: #a56c49;
      margin-bottom: 8px;
    }

    .mini-area {
      position: relative;
      width: 100%;
      height: 150px;
      background: #fff3e3;
      border-radius: 14px;
      overflow: hidden;
      margin-bottom: 6px;
      border: 1px solid #f0d2aa;
      touch-action: none;
    }

    .mini-item {
      position: absolute;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: #ffb7cf;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.18);
    }

    #miniCatcher {
      position: absolute;
      bottom: 6px;
      width: 40px;
      height: 10px;
      border-radius: 10px;
      background: #ff9a59;
    }

    .mini-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 4px;
      font-size: 0.8rem;
      color: #7b4a27;
    }

    .mini-timer {
      font-feature-settings: "tnum";
      font-weight: 600;
    }

    .mini-counter {
      font-size: 0.78rem;
      opacity: 0.8;
      margin-top: 2px;
    }

    .mini-buttons {
      display: flex;
      gap: 6px;
    }

    .mini-btn {
      border-radius: 999px;
      border: none;
      padding: 6px 10px;
      font-size: 0.78rem;
      cursor: pointer;
      background: #ffe1c0;
      color: #5a2d1c;
    }

    .mini-btn:disabled {
      opacity: 0.6;
      cursor: default;
    }

    .hidden {
      display: none;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
</head>
<body>
  <div class="container">
    <header class="header">
      <h1 class="main-title" id="mainTitle">ğŸ¥š ã¤ã¾ã‚‰ãªã„ãŠä¸–è©±ã‚²ãƒ¼ãƒ </h1>
      <p class="subtitle" id="subtitle">å ±ã‚ã‚Œãªã„ãŠä¸–è©±ã‚’100å€‹ã“ãªã™ã¨ã€å¤‰ãªã‚­ãƒ£ãƒ©ãŒç”Ÿã¾ã‚Œã¾ã™ã€‚</p>
      <p class="hint">1ã¤ãšã¤ãƒŸãƒ‹ã‚²ãƒ¼ãƒ ã§ã€Œãªã‚“ã¨ãªããŠä¸–è©±ã€â†’ ãã®å ´ã§ã¤ã¾ã‚‰ãªã„åº¦ã‚’ã‚¸ãƒ£ãƒƒã‚¸ã€‚</p>
    </header>

    <div class="top-row">
      <!-- ã¤ã¾ã‚‰ãªã„åº¦ãƒ¡ãƒ¼ã‚¿ãƒ¼ -->
      <div class="card">
        <h2>ğŸ˜´ ã„ã¾ã®ã¤ã¾ã‚‰ãªã„åº¦</h2>
        <div class="meter-container">
          <div class="meter-bar">
            <div class="meter-fill" id="boredomFill"></div>
          </div>
          <div class="meter-label" id="boredomLevel">
            0% - ã¾ã è¨ˆæ¸¬ã•ã‚Œã¦ã„ã¾ã›ã‚“
          </div>
          <div class="meter-sub" id="boredomSub">
            ã‚¸ãƒ£ãƒƒã‚¸ãŒå¢—ãˆã‚‹ã»ã©ã€ã“ã®ãƒ¡ãƒ¼ã‚¿ãƒ¼ãŒã˜ã‚ã˜ã‚å‹•ãã¾ã™ã€‚
          </div>
        </div>
      </div>

      <!-- æˆé•·ã™ã‚‹ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ -->
      <div class="card character-growth">
        <h2>ğŸŒ± æˆé•·ã™ã‚‹ã‚ˆãåˆ†ã‹ã‚‰ãªã„ã‚­ãƒ£ãƒ©</h2>
        <div class="character-area">
          <div class="character-display" id="growthCharacter">ğŸ¥š</div>
          <div class="character-status" id="characterStatus">åµï¼ˆã¾ã ä¸–ç•Œã‚’çŸ¥ã‚‰ãªã„ï¼‰</div>
          <div class="growth-progress">
            <div class="progress-bar">
              <div class="progress-fill" id="growthProgress"></div>
            </div>
            <div class="growth-stage" id="growthStage">ã¤ã¾ã‚‰ãªã„ãŠä¸–è©±ï¼š0 / 100</div>
          </div>
          <div class="character-message" id="characterMessage">
            ã¤ã¾ã‚‰ãªã„ãŠä¸–è©±ãŒ10å€‹ãŸã¾ã‚‹ã¨ã€ä¸ç´°å·¥ãªå¹¼è™«ã«ãªã‚Šã¾ã™ã€‚
          </div>
        </div>
      </div>
    </div>

    <!-- ç¾åœ¨ã®ã¤ã¾ã‚‰ãªã„ãŠä¸–è©± -->
    <div class="card current-card">
      <h3 class="game-title">
        <span id="taskLabel">No.1 ã®ã¤ã¾ã‚‰ãªã„ãŠä¸–è©±</span>
        <span id="taskStageLabel">1 / 100</span>
      </h3>
      <div class="game-area">
        <p class="status" id="taskText"></p>
        <p class="task-hint" id="taskHint">
          ã¾ãšã¯5ç§’ã ã‘ã€è¬ã®è½ã¡ã‚‚ã®ãƒŸãƒ‹ã‚²ãƒ¼ãƒ ã§ã€Œãªã‚“ã¨ãªããŠä¸–è©±ã€ã—ã¦ã¿ã¦ãã ã•ã„ã€‚
        </p>
        <div class="care-buttons" id="ratingButtons">
          <button class="btn" data-score="0">
            ã“ã‚Œã¯ã¤ã¾ã‚‰ãªã„
          </button>
          <button class="btn" data-score="1">
            ã¾ã‚ã¤ã¾ã‚‰ãªã„
          </button>
          <button class="btn" data-score="2">
            æ„å¤–ã¨å¥½ãã‹ã‚‚ã—ã‚Œãªã„
          </button>
        </div>
        <div class="log-message" id="logMessage"></div>
        <div class="result-box" id="resultBox"></div>
      </div>
    </div>

    <footer>
      100å€‹ãœã‚“ã¶ã‚¸ãƒ£ãƒƒã‚¸ã™ã‚‹ã¨ã€å¤‰ãªã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã¨ã€Œã¤ã¾ã‚‰ãªã„ãŠä¸–è©±ã®å†…è¨³ã€ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
    </footer>
  </div>

  <!-- ãƒŸãƒ‹ãŠä¸–è©±ã‚²ãƒ¼ãƒ ï¼ˆ5ç§’ã ã‘ã®è½ã¡ã‚‚ã®ã‚²ãƒ¼ãƒ ï¼‰ -->
  <div class="analysis-modal" id="miniModal">
    <div class="analysis-content">
      <h2 class="analysis-title">ãƒŸãƒ‹ãŠä¸–è©±ã‚²ãƒ¼ãƒ </h2>
      <p class="mini-caption" id="miniCaption">
        ä»Šå›ã®ã€Œã¤ã¾ã‚‰ãªã„ãŠä¸–è©±ã€ã‚’ã€ãªãœã‹è½ã¡ã¦ãã‚‹ä¸¸ã‚’æ‹¾ã†ã‚²ãƒ¼ãƒ ã§è¡¨ç¾ã—ã¦ã„ã¾ã™ã€‚ï¼ˆã‚ã¾ã‚Šæ„å‘³ã¯ã‚ã‚Šã¾ã›ã‚“ï¼‰
      </p>
      <div class="mini-area" id="miniArea">
        <div id="miniCatcher"></div>
      </div>
      <div class="mini-footer">
        <div>
          ã®ã“ã‚Š <span class="mini-timer" id="miniTimer">5.0</span> ç§’
          <div class="mini-counter" id="miniCounter">ã¨ã‚ŒãŸæ•°ï¼š0</div>
        </div>
        <div class="mini-buttons">
          <button class="mini-btn" id="miniStartBtn">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
          <button class="mini-btn hidden" id="miniOkBtn">ã“ã®ãã‚‰ã„ã§OK</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // =====================
    // ãƒ‡ãƒ¼ã‚¿ï¼šã¤ã¾ã‚‰ãªã„ãŠä¸–è©±100å€‹
    // =====================
    const TOTAL_TASKS = 100;

    const tasks = [
      "ã‚¹ãƒãƒ›ã®å……é›»æ®‹é‡ã‚’æ¯æœãƒã‚§ãƒƒã‚¯ã™ã‚‹ï¼ˆè¦‹ã¦ã‚‚å……é›»ã¯å¢—ãˆãªã„ï¼‰",
      "è¦³è‘‰æ¤ç‰©ã®è‘‰ã£ã±ã®ã»ã“ã‚Šã‚’ãµãï¼ˆã™ãã«ã¾ãŸç©ã‚‚ã‚‹ï¼‰",
      "ä½¿ã£ã¦ã„ãªã„ã‚¢ãƒ—ãƒªã®é€šçŸ¥ã‚’ã‚ªãƒ•ã«ã™ã‚‹ï¼ˆèª°ã‚‚æ°—ã¥ã‹ãªã„ï¼‰",
      "å†·è”µåº«ã®è³å‘³æœŸé™ã‚·ãƒ¼ãƒ«ã‚’ãªãŒã‚ã¦ç¢ºèªã™ã‚‹ï¼ˆè¦‹ã‚‹ã ã‘ã§æ¸›ã‚‰ãªã„ï¼‰",
      "ãƒªãƒ¢ã‚³ãƒ³ã‚’ãã‚Œã„ã«ä¸¦ã¹ç›´ã™ï¼ˆã™ãèª°ã‹ãŒãšã‚‰ã™ï¼‰",
      "ãƒ†ã‚£ãƒƒã‚·ãƒ¥ã®ç®±ã‚’éƒ¨å±‹ã”ã¨ã«ãã‚ãˆã‚‹ï¼ˆèª°ã‚‚æ„Ÿè¬ã—ãªã„ï¼‰",
      "æ°´ç­’ã®ãƒ‘ãƒƒã‚­ãƒ³ã‚’æ¯å›ã¡ã‚ƒã‚“ã¨ã¯ã‚ã‚‹ï¼ˆé”æˆæ„Ÿã¯ã‚¼ãƒ­ï¼‰",
      "ãˆã‚“ã´ã¤ã‚’ä¸€æœ¬ã ã‘ãã‚Œã„ã«ã‘ãšã‚‹ï¼ˆç‰¹ã«ä½¿ã‚ã‚Œãªã„ï¼‰",
      "ã„ã‚‰ãªã„ãƒ¬ã‚·ãƒ¼ãƒˆã‚’ä¸€æšã ã‘æ¨ã¦ã‚‹ï¼ˆè²¡å¸ƒã¯ã¾ã ãƒ‘ãƒ³ãƒ‘ãƒ³ï¼‰",
      "ã‚«ãƒãƒ³ã®ä¸­ã®ã”ã¿ã‚’ä¸€å€‹ã ã‘æ¨ã¦ã‚‹ï¼ˆåŠ‡çš„ã«ã¯å¤‰ã‚ã‚‰ãªã„ï¼‰",
      "æœºã®ä¸Šã®ã‚‚ã®ã‚’å³ã‹ã‚‰å·¦ã¸ä¸¦ã¹æ›¿ãˆã‚‹ï¼ˆæ„å‘³ã¯ã‚ã¾ã‚Šãªã„ï¼‰",
      "ã‚«ãƒ¼ãƒ†ãƒ³ã®ã—ã‚ã‚’æ‰‹ã§ã®ã°ã™ï¼ˆã¾ãŸã—ã‚ãŒå¯„ã‚‹ï¼‰",
      "ã‚´ãƒŸç®±ã®ãƒ“ãƒ‹ãƒ¼ãƒ«è¢‹ã‚’ã´ã—ã£ã¨åºƒã’ã‚‹ï¼ˆèª°ã‚‚è¦‹ã¦ã„ãªã„ï¼‰",
      "ã‚³ãƒ³ã‚»ãƒ³ãƒˆã¾ã‚ã‚Šã®ã»ã“ã‚Šã‚’ã¡ã‚‡ã£ã¨ã ã‘å–ã‚‹ï¼ˆä¸–ç•Œã¯ã‚ã¾ã‚Šå¤‰ã‚ã‚‰ãªã„ï¼‰",
      "ãƒãƒ³ã‚«ãƒã‚’ãã‚Œã„ã«å››ã¤æŠ˜ã‚Šã«ãŸãŸã‚€ï¼ˆã™ããƒã‚±ãƒƒãƒˆã®ä¸­ã§ãã¡ã‚ƒãã¡ã‚ƒï¼‰",
      "ãƒªãƒƒãƒ—ã‚¯ãƒªãƒ¼ãƒ ã®ãµãŸã‚’ãã£ã¨é–‰ã‚ã‚‹ï¼ˆéŸ³ãŒé™ã‹ãªã ã‘ï¼‰",
      "æ¶ˆã—ã‚´ãƒ ã®ã‚«ã‚¹ã‚’é›†ã‚ã¦ä¸¸ã‚ã‚‹ï¼ˆä¸¸ã‚ãŸã‚«ã‚¹ã¯ã™ãæ¨ã¦ã‚‰ã‚Œã‚‹ï¼‰",
      "ãƒšãƒ³ç«‹ã¦ã®ãƒšãƒ³ã‚’è‰²é †ã«ãªã‚‰ã¹ã‚‹ï¼ˆèª°ã‚‚æ°—ã¥ã‹ãªã„ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰",
      "æ¯æœã€æ™‚è¨ˆã‚’ä¸€å›ã ã‘è¦‹ã¦ã€Œãµãƒ¼ã‚“ã€ã¨æ€ã†ï¼ˆç‰¹ã«ä½•ã‚‚å¤‰ã‚ã‚‰ãªã„ï¼‰",
      "ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®æ—¥ä»˜ã«å°ã•ãã€‡ã‚’ã¤ã‘ã‚‹ï¼ˆã¤ã‘ã¦ã‚‚äºˆå®šã¯å¢—ãˆãªã„ï¼‰",
      "ãƒã‚°ã‚«ãƒƒãƒ—ã®å–ã£æ‰‹ã®å‘ãã‚’ãã‚ãˆã‚‹ï¼ˆä½¿ã†ã¨ã™ããƒãƒ©ãƒãƒ©ï¼‰",
      "ã‚¤ã‚¹ã‚’æœºã«ãã¡ã‚“ã¨ã—ã¾ã†ï¼ˆã¾ãŸã™ãå‡ºã•ã‚Œã‚‹ï¼‰",
      "é´ã‚’ç„é–¢ã§ã¤ã¾å…ˆãã‚ãˆã¦ä¸¦ã¹ã‚‹ï¼ˆã™ãã«èª°ã‹ãŒå´©ã™ï¼‰",
      "ãƒ–ãƒ©ãƒ³ã‚±ãƒƒãƒˆã®å‘ãã‚’ãã‚Œã„ã«ç›´ã™ï¼ˆå¯ãŸã‚‰ã¾ãŸãšã‚Œã‚‹ï¼‰",
      "ãƒªãƒ¥ãƒƒã‚¯ã®ãƒãƒ£ãƒƒã‚¯ã‚’å…¨éƒ¨ã—ã‚ã‚‹ç¢ºèªã‚’ã™ã‚‹ï¼ˆèª°ã‚‚è¦‹ã¦ã„ãªã„å®‰å…¨ç¢ºèªï¼‰",
      "ãƒ†ãƒ¬ãƒ“ã®éŸ³é‡ã‚’ã„ã¤ã‚‚ã®æ•°å­—ã«æˆ»ã™ï¼ˆã“ã ã‚ã‚Šã¯è‡ªåˆ†ã ã‘ï¼‰",
      "éƒ¨å±‹ã®ã‚¹ã‚¤ãƒƒãƒã‚’å…¨éƒ¨ã‚ªãƒ•ã‹ç¢ºèªã™ã‚‹ï¼ˆã‚ªãƒ³ã«ã™ã‚‹ã®ã‚‚è‡ªåˆ†ï¼‰",
      "ãˆã‚“ã´ã¤ã®èŠ¯ã®é•·ã•ã‚’ãã‚ãˆã‚ˆã†ã¨ã—ã¦ã¿ã‚‹ï¼ˆå®Œç’§ã«ã¯ãã‚ã‚ãªã„ï¼‰",
      "ãƒãƒ¼ãƒˆã®è§’ã‚’ãã¡ã‚“ã¨åˆã‚ã›ã¦ãã‚ãˆã‚‹ï¼ˆã¾ãŸã™ããšã‚Œã‚‹ï¼‰",
      "ãƒ¡ã‚¬ãƒæ‹­ãã§ãƒ¡ã‚¬ãƒã‚’ä¸€æ‹­ãã ã‘ã™ã‚‹ï¼ˆä¸–ç•Œã®è¦‹ãˆæ–¹ã¯ã‚ã¾ã‚Šå¤‰ã‚ã‚‰ãªã„ï¼‰",
      "ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä¸Šã‚’æ‰‹ã®ã²ã‚‰ã§ã•ã£ã¨ãªã§ã¦ã‚´ãƒŸã‚’é›†ã‚ã‚‹ï¼ˆé›†ã‚ã¦ã‚‚ã™ãè½ã¡ã‚‹ï¼‰",
      "ãƒ—ãƒªãƒ³ãƒˆã®ç«¯ã‚’ãã‚ãˆã¦ãƒˆãƒ³ãƒˆãƒ³ã™ã‚‹ï¼ˆè‡ªå·±æº€è¶³ã®æ•´åˆ—ï¼‰",
      "ãƒã‚±ãƒƒãƒˆã«ä½•ã‚‚å…¥ã£ã¦ã„ãªã„ã‹ç¢ºèªã™ã‚‹ï¼ˆã»ã¼æ¯å›ä½•ã‚‚å…¥ã£ã¦ã„ãªã„ï¼‰",
      "ãƒã‚¹ã‚¯ã®äºˆå‚™ã‚’ä¸€æšã ã‘ã‚«ãƒãƒ³ã«å…¥ã‚Œã¦ãŠãï¼ˆä½¿ã‚ã‚Œãªã„ã¾ã¾ãã—ã‚ƒãã—ã‚ƒï¼‰",
      "ã‚¹ãƒãƒ›ç”»é¢ã®æŒ‡ç´‹ã‚’ã¡ã‚‡ã£ã¨ã ã‘ãµãï¼ˆã™ãã¾ãŸã¤ãï¼‰",
      "ãŠæ°—ã«å…¥ã‚Šã‚µã‚¤ãƒˆã®ã‚¿ãƒ–ã‚’é–‰ã˜ãšã«ä¸¦ã¹ç›´ã™ï¼ˆçµå±€å…¨éƒ¨è¦‹ã‚‹ã‚ã‘ã§ã¯ãªã„ï¼‰",
      "å……é›»ã‚±ãƒ¼ãƒ–ãƒ«ã‚’ãã‚‹ã£ã¨å·»ã„ã¦ãŠããªãŠã™ï¼ˆæ¬¡ã«ä½¿ã†ã¨ãã¾ãŸã»ã©ãï¼‰",
      "éµã®ä½ç½®ã‚’æ¯å›åŒã˜å ´æ‰€ã«æˆ»ã™ï¼ˆãã‚Œã§ã‚‚ãŸã¾ã«è¦‹å¤±ã†ï¼‰",
      "åŒã˜ãƒšãƒ³ã§ä»Šæ—¥ã®æ—¥ä»˜ã ã‘æ›¸ã„ã¦ã¿ã‚‹ï¼ˆèª°ã‚‚ãã®ã“ã ã‚ã‚Šã«æ°—ã¥ã‹ãªã„ï¼‰",
      "ã”ã¿ã®æ—¥ã‹ã©ã†ã‹ã ã‘ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã§ç¢ºèªã™ã‚‹ï¼ˆç¢ºèªã—ã¦ã‚‚å‡ºã—å¿˜ã‚Œã‚‹æ™‚ãŒã‚ã‚‹ï¼‰",
      "ä½¿ã£ã¦ã„ãªã„ãƒãƒ¼ãƒˆã®ä¸€æšç›®ã ã‘ã‚ãã£ã¦æˆ»ã™ï¼ˆç‰¹ã«æ„å‘³ã¯ãªã„ï¼‰",
      "ãƒ—ãƒªãƒ³ãƒˆã®ã‚¯ãƒªã‚¢ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‰²ã”ã¨ã«åˆ†ã‘ã¦ã¿ã‚‹ï¼ˆä½¿ã†ã¨ãã¯çµå±€å…¨éƒ¨é–‹ã‘ã‚‹ï¼‰",
      "æ´—é¢å°ã®æ°´ã—ã¶ãã‚’æŒ‡ã§ãªã§ã¦æ¶ˆã™ï¼ˆæ•°åˆ†å¾Œã«ã¯ã¾ãŸæ°´ã—ã¶ãï¼‰",
      "ã‚¤ã‚¹ã®é«˜ã•ã‚’ã¡ã‚‡ã£ã¨ã ã‘èª¿æ•´ã™ã‚‹ï¼ˆé•ã„ã¯ã»ã¨ã‚“ã©åˆ†ã‹ã‚‰ãªã„ï¼‰",
      "ã‚¹ãƒªãƒƒãƒ‘ã‚’ãã‚ãˆã¦ã‚¹ã‚¿ãƒ¼ãƒˆãƒ©ã‚¤ãƒ³ã‚’ä½œã‚‹ï¼ˆèª°ã‚‚ãã®ãƒ©ã‚¤ãƒ³ã‚’æ„è­˜ã—ãªã„ï¼‰",
      "ãƒ†ã‚£ãƒƒã‚·ãƒ¥ã‚’ä¸€æšã ã‘äºˆå‚™ã§ãƒã‚±ãƒƒãƒˆã«å…¥ã‚Œã‚‹ï¼ˆå­˜åœ¨ã‚’å¿˜ã‚Œã‚‰ã‚Œã‚‹ï¼‰",
      "ãŠæ°—ã«å…¥ã‚Šã®ã‚·ãƒ£ãƒ¼ãƒšãƒ³ã ã‘èŠ¯ã‚’è£œå……ã™ã‚‹ï¼ˆä»Šæ—¥ã¯åˆ¥ã®ãƒšãƒ³ã‚’ä½¿ã†ï¼‰",
      "æœºã®è§’ã¨ãƒãƒ¼ãƒˆã®è§’ã‚’ã´ã£ãŸã‚Šåˆã‚ã›ã¦ç½®ãï¼ˆã™ããšã‚Œã‚‹ï¼‰",
      "éƒ¨å±‹ã®æ™‚è¨ˆã¨ã‚¹ãƒãƒ›ã®æ™‚é–“ã‚’è¦‹æ¯”ã¹ã‚‹ï¼ˆã»ã¼åŒã˜ã“ã¨ã‚’ç¢ºèªã™ã‚‹ã ã‘ï¼‰",
      "SNSã®é€šçŸ¥ãƒãƒ¼ã‚¯ã‚’å…¨éƒ¨æ¶ˆã—ã¦ã‚¼ãƒ­ã«ã™ã‚‹ï¼ˆã™ãã«ã¾ãŸ1ä»¶ã¤ãï¼‰",
      "å†·è”µåº«ã®ä¸­ã®ãƒšãƒƒãƒˆãƒœãƒˆãƒ«ã®å‘ãã‚’ãã‚ãˆã‚‹ï¼ˆèª°ã‚‚æ°—ã«ã—ãªã„æ•´åˆ—ï¼‰",
      "ãƒšãƒ³ã®ã‚­ãƒ£ãƒƒãƒ—ãŒã¡ã‚ƒã‚“ã¨ã¯ã¾ã£ã¦ã„ã‚‹ã‹ç¢ºèªã™ã‚‹ï¼ˆã¯ã¾ã£ã¦ã„ã¦ã‚‚å®‰å¿ƒæ„Ÿã ã‘ï¼‰",
      "ãˆã‚“ã´ã¤ã®åå‰ã‚·ãƒ¼ãƒ«ãŒã¯ãŒã‚Œã¦ãªã„ã‹è¦‹ã‚‹ï¼ˆè¦‹ã¦ã‚‚ç‰¹ã«ä½•ã‚‚ã—ãªã„ï¼‰",
      "ãƒ—ãƒªãƒ³ãƒˆã®ç©´ã‚ã‘ä½ç½®ã‚’æƒãˆã¦ãªãŒã‚ã‚‹ï¼ˆè¦‹ãŸç›®ãŒã¡ã‚‡ã£ã¨æ°—æŒã¡ã„ã„ã ã‘ï¼‰",
      "æ´—æ¿¯ç‰©ã®ãƒãƒ³ã‚¬ãƒ¼ã®å‘ãã‚’ãã‚ãˆã‚‹ï¼ˆé¢¨ãŒå¹ã„ãŸã‚‰çµ‚ã‚ã‚Šï¼‰",
      "ä»Šæ—¥ä½¿ã‚ãªã„æ–‡æˆ¿å…·ã‚’ãƒšãƒ³ã‚±ãƒ¼ã‚¹ã‹ã‚‰ä¸€å€‹å‡ºã—ã¦ãŠãï¼ˆãŸã¶ã‚“æ˜æ—¥ã‚‚ä½¿ã‚ãªã„ï¼‰",
      "ãŠæ°—ã«å…¥ã‚Šã®ã‚¹ã‚¿ãƒ³ãƒ—ã‚’ä¸€ã¤ã ã‘æŠ¼ã—ã¦æº€è¶³ã™ã‚‹ï¼ˆèª°ã‚‚ãã®1å€‹ã«æ°—ã¥ã‹ãªã„ï¼‰",
      "ã‚¹ãƒãƒ›ã®ãƒ›ãƒ¼ãƒ ç”»é¢ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’ä¸€å€‹ã ã‘ç§»å‹•ã™ã‚‹ï¼ˆé…ç½®ã¯ã»ã¨ã‚“ã©å¤‰ã‚ã‚‰ãªã„ï¼‰",
      "æ•™ç§‘æ›¸ã«ä»˜ç®‹ã‚’ä¸€æšã ã‘è²¼ã‚Šã‹ãˆã‚‹ï¼ˆãŸã¶ã‚“ãã“ã‚‚èª­ã¾ãªã„ï¼‰",
      "ã‚«ãƒ¼ãƒ†ãƒ³ã®é–‹ãå…·åˆã‚’å·¦å³å¯¾ç§°ã«ã¨ã¨ã®ãˆã‚‹ï¼ˆèª°ã‚‚å‚åŠ ã—ãªã„ã‚·ãƒ³ãƒ¡ãƒˆãƒªãƒ¼ï¼‰",
      "æ¤…å­ã®ä¸‹ã«ä½•ã‚‚è½ã¡ã¦ã„ãªã„ã‹ã®ããã“ã‚€ï¼ˆè¦‹ã¤ã‘ã¦ã‚‚æ‹¾ã†ã®ã¯è‡ªåˆ†ï¼‰",
      "ãˆã‚“ã´ã¤ã®é•·ã•é †ã«ä¸¦ã¹ã¦ãƒ‹ãƒ¤ãƒƒã¨ã™ã‚‹ï¼ˆã™ãã«é †ç•ªãŒãã¡ã‚ƒãã¡ã‚ƒï¼‰",
      "ãƒšãƒƒãƒˆãƒœãƒˆãƒ«ã®ãƒ©ãƒ™ãƒ«ã‚’ã¾ã£ã™ãã«æˆ»ã™ï¼ˆã¾ãŸã™ããšã‚Œã‚‹ï¼‰",
      "ã‚«ãƒãƒ³ã®ä¸­ã§ãƒšãƒ³ã‚±ãƒ¼ã‚¹ã®ä½ç½®ã‚’æ±ºã‚ã‚‹ï¼ˆæºã‚Œã‚‹ã¨å…ƒã©ãŠã‚Šï¼‰",
      "ä¸Šç€ã®ãƒ•ã‚¡ã‚¹ãƒŠãƒ¼ã‚’ä¸€ç•ªä¸Šã¾ã§ä¸Šã’ã¦ã¿ã‚‹ï¼ˆã™ãä¸‹ã‚ã™ï¼‰",
      "æœºã®å¼•ãå‡ºã—ã‚’ä¸€å›ã ã‘é–‹ã‘ã¦ä½•ã‚‚ã›ãšé–‰ã‚ã‚‹ï¼ˆå®‰å¿ƒæ„Ÿã ã‘å¢—ãˆã‚‹ï¼‰",
      "ãŠæ°—ã«å…¥ã‚Šæ¶ˆã—ã‚´ãƒ ã®è§’ã‚’ä¸€ã¤ã ã‘ä½¿ã£ã¦ã¿ã‚‹ï¼ˆèª°ã‚‚ãã®è§’ã®å¤‰åŒ–ã«æ°—ã¥ã‹ãªã„ï¼‰",
      "æ°´é“ã®ãƒ¬ãƒãƒ¼ã‚’ã¾ã£ã™ããªè§’åº¦ã«ãã‚ãˆã‚‹ï¼ˆæ¬¡ã®äººãŒã™ãå‹•ã‹ã™ï¼‰",
      "ãƒˆã‚¤ãƒ¬ãƒƒãƒˆãƒšãƒ¼ãƒ‘ãƒ¼ã®å…ˆç«¯ã‚’ä¸‰è§’ã«æŠ˜ã‚‹ï¼ˆèŠ¸è¡“ç‚¹ã ã‘ãŒä¸ŠãŒã‚‹ï¼‰",
      "ãƒ¡ãƒ¢å¸³ã®è¡¨ç´™ã‚’ãªã§ã¦ã‹ã‚‰ã‚«ãƒãƒ³ã«å…¥ã‚Œã‚‹ï¼ˆãªã§ã‚‰ã‚ŒãŸã“ã¨ã¯å¿˜ã‚Œã‚‰ã‚Œã‚‹ï¼‰",
      "ãƒªãƒ¢ã‚³ãƒ³ã®å‘ãã‚’ãƒ†ãƒ¬ãƒ“ã«ã´ã£ãŸã‚Šæƒãˆã¦ç½®ãï¼ˆä½¿ãˆã°ã™ãã‚ºãƒ¬ã‚‹ï¼‰",
      "ã¤ã‚ãã‚Šã‚’æ±ºã¾ã£ãŸå ´æ‰€ã«æˆ»ã™ã ã‘ã®ä»•äº‹ï¼ˆèª°ã‚‚æ°—ã¥ã‹ãªã„ç§©åºï¼‰",
      "USBãƒ¡ãƒ¢ãƒªã®ã‚­ãƒ£ãƒƒãƒ—ã‚’ãªãã—ã¦ãªã„ã‹ç¢ºèªã™ã‚‹ï¼ˆãªãã—ã¦ã‹ã‚‰ã§ã¯é…ã„ï¼‰",
      "ã‚«ã‚®æŸã®ã‚­ãƒ¼ãƒ›ãƒ«ãƒ€ãƒ¼ã®å‘ãã‚’æ•´ãˆã‚‹ï¼ˆæœ¬äººä»¥å¤–ã¯è¦‹ã¦ã„ãªã„ï¼‰",
      "ä»Šæ—¥ä½¿ã‚ãªã„ã‚«ãƒ¼ãƒ‰ã‚’è²¡å¸ƒã®å¥¥ã«ã—ã¾ã„ãªãŠã™ï¼ˆã¾ãŸåˆ¥ã®æ—¥ã«è¿·ã†ï¼‰",
      "é¡ã®å‰ã§å‰é«ªã‚’ä¸€å›ã ã‘ç›´ã™ï¼ˆå¤–ã«å‡ºãŸã‚‰é¢¨ã§çµ‚ã‚ã‚Šï¼‰",
      "æ¤…å­ã®è¶³ã‚’å…¨éƒ¨åŒã˜ç·šã®ä¸Šã«ãã‚ãˆã‚‹ï¼ˆèª°ã‚‚ãã®ãƒ©ã‚¤ãƒ³ã«æ°—ã¥ã‹ãªã„ï¼‰",
      "ã‚¹ãƒãƒ›ã®ç”»é¢ã®æ˜ã‚‹ã•ã‚’ã„ã¤ã‚‚ã®æ˜ã‚‹ã•ã«èª¿æ•´ã™ã‚‹ï¼ˆå¾®å¦™ãªå·®ï¼‰",
      "ä½¿ã„ã‹ã‘ã®ãƒãƒ¼ãƒˆã®ã—ãŠã‚Šã‚’ãã‚Œã„ã«å·®ã—ãªãŠã™ï¼ˆæ¬¡é–‹ãã¾ã§èª°ã‚‚çŸ¥ã‚‰ãªã„ï¼‰",
      "æœºã®ä¸Šã®æœ¬ã®ã‚¿ã‚¤ãƒˆãƒ«ãŒèª­ã‚ã‚‹å‘ãã«ãã‚ãˆã‚‹ï¼ˆèª°ã‚‚èª­ã¾ãªã„ã‹ã‚‚ã—ã‚Œãªã„ï¼‰",
      "ã‚¿ã‚ªãƒ«ã‚’ãã‚‹ã£ã¨å·»ã„ã¦åŒã˜é«˜ã•ã«ãã‚ãˆã‚‹ï¼ˆã™ãä½¿ã£ã¦å´©ã‚Œã‚‹ï¼‰",
      "ã‚«ãƒ¼ãƒ†ãƒ³ã®ã‚¿ãƒƒã‚»ãƒ«ã‚’ãã‚Œã„ãªä½ç½®ã«ç›´ã™ï¼ˆã¡ã‚‡ã£ã¨ã ã‘æº€è¶³ï¼‰",
      "ã”ã¿è¢‹ã®å£ã‚’ãã‚…ã£ã¨çµã³ç›´ã™ã ã‘ï¼ˆçµã³ç›´ã—ã¦ã‚‚ä¸­èº«ã¯åŒã˜ï¼‰",
      "æ´—é¢å°ã®ã‚³ãƒƒãƒ—ã‚’ã¾ã£ã™ãã®å‘ãã«ç½®ãï¼ˆã™ãèª°ã‹ãŒå›ã™ï¼‰",
      "ãƒãƒ³ãƒ‰ã‚¯ãƒªãƒ¼ãƒ ã‚’æ‰‹ã®ç”²ã«ä¸€å›ã ã‘å¡—ã‚‹ï¼ˆä¸–ç•Œã¯ã‚ã¾ã‚Šå¤‰ã‚ã‚‰ãªã„ï¼‰",
      "ä½¿ã„çµ‚ã‚ã£ãŸã‚¤ã‚¹ã‚’å…ƒã®å ´æ‰€ã«ã´ã£ãŸã‚Šæˆ»ã™ï¼ˆã¾ãŸã™ãå‹•ã‹ã•ã‚Œã‚‹ï¼‰",
      "æœºã®ä¸‹ã®è¶³å…ƒãƒãƒƒãƒˆã®å‘ãã‚’ç›´ã™ï¼ˆå‹•ããŸã³ã«ãšã‚Œã‚‹ï¼‰",
      "å……é›»å™¨ã®ã‚³ãƒ³ã‚»ãƒ³ãƒˆã‚’æ ¹å…ƒã¾ã§ã—ã£ã‹ã‚Šå·®ã—ã“ã‚€ï¼ˆã‚‚ã¨ã‚‚ã¨åˆºã•ã£ã¦ã„ã‚‹ã“ã¨ãŒå¤šã„ï¼‰",
      "ãƒ›ãƒ¯ã‚¤ãƒˆãƒœãƒ¼ãƒ‰ã®ãƒšãƒ³ã‚’è‰²é †ã«ç½®ãç›´ã™ï¼ˆæˆæ¥­ã§é †ç•ªã¯å´©ã‚Œã‚‹ï¼‰",
      "ä»Šæ—¥ã®ãƒ—ãƒªãƒ³ãƒˆã‚’ä¸€æšã ã‘ãƒ•ã‚¡ã‚¤ãƒ«ã«ã—ã¾ã†ï¼ˆãã®1æšã ã‘å¦™ã«ä¸å¯§ï¼‰",
      "æ•™ç§‘æ›¸ã®è§’ãŒæŠ˜ã‚Œã¦ã„ãŸã‚‰ãã£ã¨ã®ã°ã™ï¼ˆã¾ãŸã™ãæŠ˜ã‚Œã‚‹ï¼‰",
      "ä½¿ã„çµ‚ã‚ã£ãŸãŠçš¿ã‚’ã‚·ãƒ³ã‚¯ã®ç«¯ã«ãã‚Œã„ã«é‡ã­ã‚‹ï¼ˆæ´—ã†ã®ã¯ã¾ã å…ˆï¼‰",
      "ãƒšãƒƒãƒˆãƒœãƒˆãƒ«ã®ã‚­ãƒ£ãƒƒãƒ—ã‚’é›†ã‚ã¦åŒã˜å ´æ‰€ã«å…¥ã‚Œã‚‹ï¼ˆç‰¹ã«ä½¿ã„é“ã¯æ±ºã¾ã£ã¦ã„ãªã„ï¼‰",
      "æŠ˜ã‚ŠãŸãŸã¿å‚˜ã®ãƒ’ãƒ¢ã‚’ã¡ã‚ƒã‚“ã¨å·»ãç›´ã™ï¼ˆæ¬¡ã«ä½¿ã†ã¨ãæ€¥ã„ã§ã»ã©ãï¼‰",
      "ãƒã‚±ãƒƒãƒˆãƒ†ã‚£ãƒƒã‚·ãƒ¥ã®æ®‹ã‚Šæšæ•°ã‚’ãªã‚“ã¨ãªãç¢ºèªã™ã‚‹ï¼ˆç¢ºèªã—ã¦ã‚‚å¢—ãˆãªã„ï¼‰",
      "ã‚¤ã‚¹ã®èƒŒã‚‚ãŸã‚Œã«ã‹ã‘ãŸä¸Šç€ã®ã—ã‚ã‚’ã®ã°ã™ï¼ˆåº§ã£ãŸã‚‰ã¾ãŸã—ã‚ï¼‰",
      "æœºã®ä¸Šã®å……é›»ã‚³ãƒ¼ãƒ‰ã‚’ä¸€æœ¬ã ã‘ã»ã©ã„ã¦æ•´ãˆã‚‹ï¼ˆã™ãçµ¡ã¾ã‚‹ï¼‰",
      "é›»æ°—ã‚’æ¶ˆã™å‰ã«éƒ¨å±‹ã‚’ä¸€å›è¦‹å›ã™ï¼ˆç‰¹ã«å¤‰åŒ–ã¯ãªã„ï¼‰",
      "å¯ã‚‹å‰ã«æ•ã®ä½ç½®ã‚’ã¡ã‚‡ã£ã¨ã ã‘ä¸­å¤®ã«ç›´ã™ï¼ˆå¯è¿”ã‚Šã§ã™ãã‚ºãƒ¬ã‚‹ï¼‰",
      "ã€Œä»Šæ—¥ã‚‚ãªã‚“ã‹ä¸–è©±ã—ãŸãªã€ã¨å°ã•ãæ€ã„ãªãŒã‚‰å¯ã‚‹ï¼ˆèª°ã‚‚çŸ¥ã‚‰ãªã„æº€è¶³æ„Ÿï¼‰"
    ];

    // =====================
    // DOM å–å¾—
    // =====================
    const boredomFillEl = document.getElementById('boredomFill');
    const boredomLevelEl = document.getElementById('boredomLevel');
    const boredomSubEl = document.getElementById('boredomSub');

    const characterEl = document.getElementById('growthCharacter');
    const characterStatusEl = document.getElementById('characterStatus');
    const characterMessageEl = document.getElementById('characterMessage');
    const growthProgressEl = document.getElementById('growthProgress');
    const growthStageEl = document.getElementById('growthStage');

    const taskLabelEl = document.getElementById('taskLabel');
    const taskStageLabelEl = document.getElementById('taskStageLabel');
    const taskTextEl = document.getElementById('taskText');
    const taskHintEl = document.getElementById('taskHint');
    const ratingButtonsEl = document.getElementById('ratingButtons');
    const logMessageEl = document.getElementById('logMessage');
    const resultBoxEl = document.getElementById('resultBox');

    const miniModalEl = document.getElementById('miniModal');
    const miniCaptionEl = document.getElementById('miniCaption');
    const miniAreaEl = document.getElementById('miniArea');
    const miniCatcherEl = document.getElementById('miniCatcher');
    const miniTimerEl = document.getElementById('miniTimer');
    const miniCounterEl = document.getElementById('miniCounter');
    const miniStartBtn = document.getElementById('miniStartBtn');
    const miniOkBtn = document.getElementById('miniOkBtn');

    // =====================
    // çŠ¶æ…‹
    // =====================
    let currentIndex = 0;          // 0ã€œ99
    const ratings = [];            // å„ãŠä¸–è©±ã®ã‚¸ãƒ£ãƒƒã‚¸ï¼ˆ0,1,2ï¼‰
    let miniPlayedForThisTask = false;

    // ãƒŸãƒ‹ã‚²ãƒ¼ãƒ ç”¨
    let miniPlaying = false;
    let miniStartTime = 0;
    const miniDuration = 5000; // 5ç§’
    let miniTimerInterval = null;
    let miniGameInterval = null;
    let miniItems = [];
    let miniCaught = 0;
    let catcherX = 0;

    // =====================
    // è¡¨ç¤ºæ›´æ–°
    // =====================
    function updateCharacter() {
      const n = currentIndex;
      let emoji = 'ğŸ¥š';
      let status = 'åµï¼ˆã¾ã ä¸–ç•Œã‚’çŸ¥ã‚‰ãªã„ï¼‰';
      let msg = 'ã¤ã¾ã‚‰ãªã„ãŠä¸–è©±ãŒ10å€‹ãŸã¾ã‚‹ã¨ã€ä¸ç´°å·¥ãªå¹¼è™«ã«ãªã‚Šã¾ã™ã€‚';

      if (n >= 10 && n < 20) {
        emoji = 'ğŸª±';
        status = 'ä¸ç´°å·¥ãªå¹¼è™«';
        msg = 'ã•ã‚‰ã«10å€‹ã§ã€è¦‹ãŸã“ã¨ã®ãªã„è¬ã®ã•ãªãã«ãªã‚Šã¾ã™ã€‚';
      } else if (n >= 20 && n < TOTAL_TASKS) {
        emoji = 'ğŸ«§';
        status = 'ãªãã®ã•ãªã';
        msg = '100å€‹ç›®ã®ãŠä¸–è©±ã§ã€å¤‰ãªã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãŒç”Ÿã¾ã‚Œã¾ã™ã€‚';
      } else if (n >= TOTAL_TASKS) {
        emoji = 'ğŸ‘¾';
        status = 'å¤‰ãªã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼';
        msg = 'ã‚‚ã†ååˆ†ãŠä¸–è©±ã•ã‚Œã¾ã—ãŸã€‚ã“ã“ã‹ã‚‰ã¯è¦³å¯Ÿã‚¿ãƒ¼ãƒ³ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚';
      }

      characterEl.textContent = emoji;
      characterStatusEl.textContent = status;
      characterMessageEl.textContent = msg;

      const percent = Math.min(100, (n / TOTAL_TASKS) * 100);
      growthProgressEl.style.width = percent + '%';
      growthStageEl.textContent = `ã¤ã¾ã‚‰ãªã„ãŠä¸–è©±ï¼š${Math.min(n, TOTAL_TASKS)} / ${TOTAL_TASKS}`;
    }

    function updateTask() {
      const no = currentIndex + 1;
      taskLabelEl.textContent = `No.${no} ã®ã¤ã¾ã‚‰ãªã„ãŠä¸–è©±`;
      taskStageLabelEl.textContent = `${no} / ${TOTAL_TASKS}`;
      taskTextEl.textContent = tasks[currentIndex];
      taskHintEl.textContent =
        'ã¾ãšã¯5ç§’ã ã‘ã€è¬ã®è½ã¡ã‚‚ã®ãƒŸãƒ‹ã‚²ãƒ¼ãƒ ã§ã€Œãªã‚“ã¨ãªããŠä¸–è©±ã€ã—ã¦ã¿ã¦ãã ã•ã„ã€‚';
      logMessageEl.textContent = '';
    }

    function updateBoredomMeter() {
      if (ratings.length === 0) {
        boredomFillEl.style.width = '0%';
        boredomLevelEl.textContent = '0% - ã¾ã è¨ˆæ¸¬ã•ã‚Œã¦ã„ã¾ã›ã‚“';
        boredomSubEl.textContent = 'ã‚¸ãƒ£ãƒƒã‚¸ãŒå¢—ãˆã‚‹ã»ã©ã€ã“ã®ãƒ¡ãƒ¼ã‚¿ãƒ¼ãŒã˜ã‚ã˜ã‚å‹•ãã¾ã™ã€‚';
        return;
      }

      let totalScore = 0;
      ratings.forEach(r => {
        if (r === 0) totalScore += 100;   // ã“ã‚Œã¯ã¤ã¾ã‚‰ãªã„
        else if (r === 1) totalScore += 60; // ã¾ã‚ã¤ã¾ã‚‰ãªã„
        else totalScore += 20;            // æ„å¤–ã¨å¥½ãã‹ã‚‚
      });

      const level = Math.round(totalScore / ratings.length);
      boredomFillEl.style.width = level + '%';

      let label = '';
      if (level < 20) label = `${level}% - ã¾ã æ¥½ã—ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“`;
      else if (level < 40) label = `${level}% - ã¡ã‚‡ã£ã¨ã¤ã¾ã‚‰ãªã„ä¸–ç•Œ`;
      else if (level < 60) label = `${level}% - ã ã„ã¶ã¤ã¾ã‚‰ãªã„æ—¥å¸¸`;
      else if (level < 80) label = `${level}% - ã‹ãªã‚Šå ±ã‚ã‚Œãªã„ã‚¾ãƒ¼ãƒ³`;
      else label = `${level}% - çµ¶æœ›çš„ã«ã¤ã¾ã‚‰ãªã„ï¼ˆã„ã„æ„å‘³ã§ï¼‰`;

      boredomLevelEl.textContent = label;
      boredomSubEl.textContent = `ã“ã‚Œã¾ã§ã« ${ratings.length} å€‹ã®ãŠä¸–è©±ã‚’ã‚¸ãƒ£ãƒƒã‚¸ã—ã¾ã—ãŸã€‚`;
    }

    function setButtonsEnabled(enabled) {
      if (enabled) {
        ratingButtonsEl.classList.remove('disabled');
      } else {
        ratingButtonsEl.classList.add('disabled');
      }
      ratingButtonsEl.querySelectorAll('.btn').forEach(btn => {
        btn.disabled = !enabled;
      });
    }

    function showLastRatingMessage(score) {
      if (score === 0) {
        logMessageEl.textContent = 'ã€Œã“ã‚Œã¯ã¤ã¾ã‚‰ãªã„ã€ã¨ã‚¸ãƒ£ãƒƒã‚¸ã—ã¾ã—ãŸã€‚';
      } else if (score === 1) {
        logMessageEl.textContent = 'ã€Œã¾ã‚ã¤ã¾ã‚‰ãªã„ã€ã¨ã‚¸ãƒ£ãƒƒã‚¸ã—ã¾ã—ãŸã€‚';
      } else {
        logMessageEl.textContent = 'ã€Œæ„å¤–ã¨å¥½ãã‹ã‚‚ã—ã‚Œãªã„ã€ã¨ã‚¸ãƒ£ãƒƒã‚¸ã—ã¾ã—ãŸã€‚';
      }
    }

    function showFinalSummary() {
      const count0 = ratings.filter(r => r === 0).length;
      const count1 = ratings.filter(r => r === 1).length;
      const count2 = ratings.filter(r => r === 2).length;

      resultBoxEl.style.display = 'block';

      const summaryText =
        `ã€Œã“ã‚Œã¯ã¤ã¾ã‚‰ãªã„ã€: ${count0} å€‹\n` +
        `ã€Œã¾ã‚ã¤ã¾ã‚‰ãªã„ã€: ${count1} å€‹\n` +
        `ã€Œæ„å¤–ã¨å¥½ãã‹ã‚‚ã—ã‚Œãªã„ã€: ${count2} å€‹\n`;

      resultBoxEl.innerHTML =
        `<p>100å€‹ã™ã¹ã¦ã‚¸ãƒ£ãƒƒã‚¸ã—ã¾ã—ãŸã€‚</p>
         <p>ã¤ã¾ã‚‰ãªã„ãŠä¸–è©±ã®å†…è¨³ï¼š</p>
         <ul>
           <li>ã€Œã“ã‚Œã¯ã¤ã¾ã‚‰ãªã„ã€ï¼š${count0} å€‹</li>
           <li>ã€Œã¾ã‚ã¤ã¾ã‚‰ãªã„ã€ï¼š${count1} å€‹</li>
           <li>ã€Œæ„å¤–ã¨å¥½ãã‹ã‚‚ã—ã‚Œãªã„ã€ï¼š${count2} å€‹</li>
         </ul>
         <p>ã“ã®çµæœã‹ã‚‰ç”Ÿã¾ã‚ŒãŸã®ãŒã€ä»Šã®ã€Œå¤‰ãªã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã€ã§ã™ã€‚</p>
         <button class="btn small-btn" id="restartBtn">ã‚‚ã†ä¸€åº¦ã¯ã˜ã‚ã‹ã‚‰</button>`;

      const restartBtn = document.getElementById('restartBtn');
      restartBtn.addEventListener('click', () => {
        currentIndex = 0;
        ratings.length = 0;
        miniPlayedForThisTask = false;
        resultBoxEl.style.display = 'none';
        resultBoxEl.innerHTML = '';
        setButtonsEnabled(false);
        updateCharacter();
        updateTask();
        updateBoredomMeter();
        openMiniForCurrentTask();
      });
    }

    // =====================
    // ã‚¸ãƒ£ãƒƒã‚¸å‡¦ç†
    // =====================
    function handleRating(score) {
      if (!miniPlayedForThisTask) {
        logMessageEl.textContent = 'ã¾ãšã¯ãƒŸãƒ‹ãŠä¸–è©±ã‚²ãƒ¼ãƒ ã§ã€5ç§’ã ã‘æ“ä½œã—ã¦ã¿ã¦ãã ã•ã„ã€‚';
        openMiniForCurrentTask();
        return;
      }

      ratings[currentIndex] = score;
      showLastRatingMessage(score);
      updateBoredomMeter();

      currentIndex++;
      miniPlayedForThisTask = false;

      if (currentIndex >= TOTAL_TASKS) {
        currentIndex = TOTAL_TASKS;
        updateCharacter();
        updateTask();
        setButtonsEnabled(false);
        showFinalSummary();
        logMessageEl.textContent = 'ãŠç–²ã‚Œã•ã¾ã§ã—ãŸã€‚ã¤ã¾ã‚‰ãªã„ãŠä¸–è©±ã®æ—…ã¯ã“ã“ã¾ã§ã§ã™ã€‚';
        return;
      }

      updateCharacter();
      updateTask();
      setButtonsEnabled(false);
      openMiniForCurrentTask();
    }

    // =====================
    // ãƒŸãƒ‹ã‚²ãƒ¼ãƒ é–¢é€£
    // =====================
    function resetMiniGameView() {
      miniPlaying = false;
      miniStartTime = 0;
      miniItems.forEach(obj => {
        if (obj.el && obj.el.parentNode === miniAreaEl) {
          miniAreaEl.removeChild(obj.el);
        }
      });
      miniItems = [];
      miniCaught = 0;
      miniTimerEl.textContent = '5.0';
      miniCounterEl.textContent = 'ã¨ã‚ŒãŸæ•°ï¼š0';
      miniCaptionEl.textContent =
        'ä»Šå›ã®ã€Œã¤ã¾ã‚‰ãªã„ãŠä¸–è©±ã€ã‚’ã€ãªãœã‹è½ã¡ã¦ãã‚‹ä¸¸ã‚’æ‹¾ã†ã‚²ãƒ¼ãƒ ã§è¡¨ç¾ã—ã¦ã„ã¾ã™ã€‚ï¼ˆã‚ã¾ã‚Šæ„å‘³ã¯ã‚ã‚Šã¾ã›ã‚“ï¼‰';
      miniStartBtn.disabled = false;
      miniStartBtn.classList.remove('hidden');
      miniOkBtn.classList.add('hidden');

      const rect = miniAreaEl.getBoundingClientRect();
      catcherX = rect.width / 2;
      miniCatcherEl.style.left = (catcherX - 20) + 'px';
    }

    function stopMiniGame() {
      miniPlaying = false;
      if (miniTimerInterval) {
        clearInterval(miniTimerInterval);
        miniTimerInterval = null;
      }
      if (miniGameInterval) {
        clearInterval(miniGameInterval);
        miniGameInterval = null;
      }
      miniItems.forEach(obj => {
        if (obj.el && obj.el.parentNode === miniAreaEl) {
          miniAreaEl.removeChild(obj.el);
        }
      });
      miniItems = [];
    }

    function startMiniGame() {
      stopMiniGame();
      miniPlaying = true;
      miniStartTime = performance.now();
      miniCaught = 0;
      miniCounterEl.textContent = 'ã¨ã‚ŒãŸæ•°ï¼š0';
      miniStartBtn.disabled = true;

      miniTimerInterval = setInterval(() => {
        const elapsed = performance.now() - miniStartTime;
        const remain = Math.max(0, (miniDuration - elapsed) / 1000);
        miniTimerEl.textContent = remain.toFixed(1);
        if (elapsed >= miniDuration) {
          endMiniGame();
        }
      }, 80);

      miniGameInterval = setInterval(updateMiniGame, 30);
    }

    function endMiniGame() {
      if (!miniPlaying) return;
      stopMiniGame();
      miniStartBtn.classList.add('hidden');
      miniOkBtn.classList.remove('hidden');
      miniCaptionEl.textContent =
        'ãƒŸãƒ‹ã‚²ãƒ¼ãƒ çµ‚äº†ã€‚ãŸãã•ã‚“å–ã‚Œã¦ã‚‚å–ã‚Œãªãã¦ã‚‚ã€ç¾å®Ÿä¸–ç•Œã¯ã‚ã¾ã‚Šå¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚';
    }

    function updateMiniGame() {
      const areaRect = miniAreaEl.getBoundingClientRect();
      const catcherWidth = 40;
      const catcherY = areaRect.height - 6 - 10;

      // ãƒ©ãƒ³ãƒ€ãƒ ã«ä¸¸ãŒè½ã¡ã¦ãã‚‹
      if (Math.random() < 0.12) {
        const itemEl = document.createElement('div');
        itemEl.className = 'mini-item';
        const x = Math.random() * (areaRect.width - 14) + 7;
        const y = -14;
        itemEl.style.left = (x - 7) + 'px';
        itemEl.style.top = y + 'px';
        miniAreaEl.appendChild(itemEl);
        miniItems.push({ x, y, el: itemEl });
      }

      const speed = 3;
      const newItems = [];
      miniItems.forEach(obj => {
        obj.y += speed;
        if (obj.y > areaRect.height + 20) {
          if (obj.el.parentNode === miniAreaEl) {
            miniAreaEl.removeChild(obj.el);
          }
          return;
        }

        const dx = obj.x - catcherX;
        if (obj.y >= catcherY - 10 && Math.abs(dx) < catcherWidth / 2 + 4) {
          miniCaught += 1;
          miniCounterEl.textContent = 'ã¨ã‚ŒãŸæ•°ï¼š' + miniCaught;
          if (obj.el.parentNode === miniAreaEl) {
            miniAreaEl.removeChild(obj.el);
          }
          return;
        }

        obj.el.style.top = obj.y + 'px';
        newItems.push(obj);
      });
      miniItems = newItems;

      miniCatcherEl.style.left = (catcherX - catcherWidth / 2) + 'px';
    }

    function onMiniPointerMove(e) {
      const rect = miniAreaEl.getBoundingClientRect();
      const clientX = e.touches ? e.touches[0].clientX : e.clientX;
      let x = clientX - rect.left;
      x = Math.max(20, Math.min(rect.width - 20, x));
      catcherX = x;
      const catcherWidth = 40;
      miniCatcherEl.style.left = (catcherX - catcherWidth / 2) + 'px';
    }

    function openMiniForCurrentTask() {
      miniModalEl.style.display = 'flex';
      miniCaptionEl.textContent =
        `ã€Œ${tasks[currentIndex].split('ï¼ˆ')[0]}ã€ã‚’ã€ãªãœã‹è½ã¡ã‚‚ã®ã‚²ãƒ¼ãƒ ã§å†ç¾ã—ã¦ã„ã¾ã™ã€‚ï¼ˆã‚ã¾ã‚Šé–¢ä¿‚ã¯ã‚ã‚Šã¾ã›ã‚“ï¼‰`;
      resetMiniGameView();
    }

    // ãƒã‚¤ãƒ³ã‚¿æ“ä½œ
    miniAreaEl.addEventListener('mousemove', onMiniPointerMove);
    miniAreaEl.addEventListener('touchmove', function (e) {
      onMiniPointerMove(e);
      e.preventDefault();
    }, { passive: false });

    miniStartBtn.addEventListener('click', startMiniGame);

    miniOkBtn.addEventListener('click', () => {
      miniPlayedForThisTask = true;
      miniModalEl.style.display = 'none';
      setButtonsEnabled(true);
      logMessageEl.textContent =
        'ãªã‚“ã¨ãªããŠä¸–è©±ã—ã¦ã¿ã¾ã—ãŸã­ã€‚ä»Šã®æ„Ÿè¦šã§ã€ã“ã®ãŠä¸–è©±ã®ã¤ã¾ã‚‰ãªã•ã‚’ã‚¸ãƒ£ãƒƒã‚¸ã—ã¦ã¿ã¦ãã ã•ã„ã€‚';
    });

    // ã‚¸ãƒ£ãƒƒã‚¸ãƒœã‚¿ãƒ³
    ratingButtonsEl.querySelectorAll('.btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const score = Number(btn.dataset.score);
        handleRating(score);
      });
    });

    // åˆæœŸè¡¨ç¤º
    function initGame() {
      currentIndex = 0;
      ratings.length = 0;
      miniPlayedForThisTask = false;
      setButtonsEnabled(false);
      updateCharacter();
      updateTask();
      updateBoredomMeter();
      openMiniForCurrentTask();
    }

    initGame();

    // =====================
    // Element SDKï¼ˆã‚¿ã‚¤ãƒˆãƒ«ã¨ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«ã®ã‚«ã‚¹ã‚¿ãƒ ç”¨ï¼‰
    // =====================
    const defaultConfig = {
      main_title: "ğŸ¥š ã¤ã¾ã‚‰ãªã„ãŠä¸–è©±ã‚²ãƒ¼ãƒ ",
      subtitle: "å ±ã‚ã‚Œãªã„ãŠä¸–è©±ã‚’100å€‹ã“ãªã™ã¨ã€å¤‰ãªã‚­ãƒ£ãƒ©ãŒç”Ÿã¾ã‚Œã¾ã™ã€‚"
    };

    async function onConfigChange(config) {
      document.getElementById('mainTitle').textContent =
        config.main_title || defaultConfig.main_title;
      document.getElementById('subtitle').textContent =
        config.subtitle || defaultConfig.subtitle;
    }

    function mapToCapabilities(config) {
      return {
        recolorables: [],
        borderables: [],
        fontEditable: undefined,
        fontSizeable: undefined
      };
    }

    function mapToEditPanelValues(config) {
      return new Map([
        ["main_title", config.main_title || defaultConfig.main_title],
        ["subtitle", config.subtitle || defaultConfig.subtitle]
      ]);
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }
  </script>
</body>
</html>
