<!doctype html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ã¤ã¾ã‚‰ãªã„ãŠä¸–è©±ã‚²ãƒ¼ãƒ </title>
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 20px;
      font-family: -apple-system, BlinkMacSystemFont, "Hiragino Sans", "Yu Gothic", sans-serif;
      background: linear-gradient(135deg, #8B5A3C 0%, #A0522D 100%);
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: #F5F5DC;
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.2);
      box-sizing: border-box;
    }

    .header {
      text-align: center;
      margin-bottom: 40px;
    }

    .main-title {
      font-size: 2.5rem;
      color: #8B4513;
      margin-bottom: 10px;
      font-weight: bold;
    }

    .subtitle {
      font-size: 1.1rem;
      color: #A0522D;
      margin-bottom: 30px;
    }

    .games-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .game-card {
      background: #FAEBD7;
      border-radius: 15px;
      padding: 20px;
      border: 2px solid #DEB887;
      transition: all 0.3s ease;
      box-sizing: border-box;
    }

    .game-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    .game-title {
      font-size: 1.3rem;
      font-weight: bold;
      color: #8B4513;
      margin-bottom: 15px;
      text-align: center;
    }

    .game-area {
      min-height: 200px;
      background: #FFF8DC;
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 15px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
      border: 1px solid #DDD;
      box-sizing: border-box;
    }

    .btn {
      background: #CD853F;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      transition: background 0.3s ease;
      margin: 5px;
    }

    .btn:hover {
      background: #A0522D;
    }

    .btn:disabled {
      background: #D2B48C;
      cursor: not-allowed;
    }

    .status {
      font-size: 1.1rem;
      font-weight: bold;
      color: #8B4513;
      margin: 10px 0;
      text-align: center;
    }

    .pet-display {
      font-size: 4rem;
      margin: 20px 0;
      transition: all 0.5s ease;
    }

    .progress-bar {
      width: 200px;
      height: 20px;
      background: #DDD;
      border-radius: 10px;
      overflow: hidden;
      margin: 10px 0;
    }

    .progress-fill {
      height: 100%;
      background: #CD853F;
      transition: width 0.3s ease;
    }

    .care-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin: 15px 0;
    }

    .message {
      font-size: 0.9rem;
      color: #A0522D;
      text-align: center;
      margin: 10px 0;
      min-height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .sad {
      filter: grayscale(100%);
      transform: scale(0.8);
    }

    .angry {
      animation: shake 0.5s ease-in-out;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }

    .hidden {
      opacity: 0.3;
      transform: scale(0.5);
    }

    .wilted {
      filter: sepia(100%) hue-rotate(30deg);
      transform: rotate(-15deg);
    }

    /* ã¤ã¾ã‚‰ãªã„åº¦ãƒ¡ãƒ¼ã‚¿ãƒ¼ */
    .boredom-meter {
      background: #FAEBD7;
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 30px;
      border: 2px solid #DEB887;
      text-align: center;
      box-sizing: border-box;
    }

    .boredom-meter h2 {
      color: #8B4513;
      margin-bottom: 20px;
    }

    .meter-container {
      margin: 20px 0;
    }

    .meter-bar {
      width: 100%;
      height: 30px;
      background: #DDD;
      border-radius: 15px;
      overflow: hidden;
      margin-bottom: 10px;
    }

    .meter-fill {
      height: 100%;
      background: linear-gradient(90deg, #48bb78 0%, #ed8936 50%, #f56565 100%);
      transition: width 0.5s ease;
    }

    .meter-label {
      font-size: 1.2rem;
      font-weight: bold;
      color: #8B4513;
    }

    .boredom-actions {
      margin-top: 20px;
    }

    /* æˆé•·ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ */
    .character-growth {
      background: #FAEBD7;
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 30px;
      border: 2px solid #DEB887;
      text-align: center;
      box-sizing: border-box;
    }

    .character-growth h2 {
      color: #8B4513;
      margin-bottom: 20px;
    }

    .character-area {
      background: #FFF8DC;
      border-radius: 10px;
      padding: 20px;
      border: 1px solid #DDD;
      box-sizing: border-box;
    }

    .character-display {
      font-size: 5rem;
      margin: 20px 0;
      transition: all 0.5s ease;
    }

    .character-status {
      font-size: 1.3rem;
      font-weight: bold;
      color: #8B4513;
      margin-bottom: 15px;
    }

    .growth-progress {
      margin: 20px 0;
    }

    .growth-stage {
      font-size: 1rem;
      color: #A0522D;
      margin-top: 10px;
    }

    .character-message {
      font-size: 1rem;
      color: #A0522D;
      margin: 15px 0;
      min-height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* åˆ†æçµæœãƒ¢ãƒ¼ãƒ€ãƒ« */
    .analysis-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .analysis-content {
      background: #FFF8DC;
      border-radius: 20px;
      padding: 30px;
      max-width: 500px;
      width: 90%;
      text-align: center;
      border: 3px solid #8B4513;
      box-sizing: border-box;
    }

    .analysis-title {
      font-size: 2rem;
      color: #8B4513;
      margin-bottom: 20px;
    }

    .personality-result {
      font-size: 1.5rem;
      margin: 20px 0;
      padding: 15px;
      background: #FAEBD7;
      border-radius: 10px;
      border: 2px solid #DEB887;
    }

    .analysis-details {
      text-align: left;
      margin: 20px 0;
      color: #8B4513;
    }

    .close-btn {
      background: #f56565;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      margin-top: 20px;
    }

    .close-btn:hover {
      background: #e53e3e;
    }
  </style>
</head>
<body>
  <div class="container">
    <header class="header">
      <h1 class="main-title" id="mainTitle">ğŸ˜ ã¤ã¾ã‚‰ãªã„ãŠä¸–è©±ã‚²ãƒ¼ãƒ </h1>
      <p class="subtitle" id="subtitle">ã©ã‚“ãªã«ãŠä¸–è©±ã—ã¦ã‚‚å ±ã‚ã‚Œãªã„ã‚²ãƒ¼ãƒ é›†</p>
    </header>

    <!-- ã¤ã¾ã‚‰ãªã„åº¦ãƒ¡ãƒ¼ã‚¿ãƒ¼ -->
    <div class="boredom-meter">
      <h2>ğŸ˜´ ã¤ã¾ã‚‰ãªã„åº¦ãƒ¡ãƒ¼ã‚¿ãƒ¼</h2>
      <div class="meter-container">
        <div class="meter-bar">
          <div class="meter-fill" id="boredomFill" style="width: 0%;"></div>
        </div>
        <div class="meter-label" id="boredomLevel">
          0% - ã¾ã æ¥½ã—ã„
        </div>
      </div>
      <div class="boredom-actions">
        <button class="btn" onclick="judgeBoredom()">ğŸ¯ ã¤ã¾ã‚‰ãªã„åº¦ã‚¸ãƒ£ãƒƒã‚¸</button>
        <button class="btn" onclick="showAnalysis()">ğŸ“Š æœ€çµ‚åˆ†æ</button>
      </div>
    </div>

    <!-- æˆé•·ã™ã‚‹ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ -->
    <div class="character-growth">
      <h2>ğŸ¥š æˆé•·ã™ã‚‹ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼</h2>
      <div class="character-area">
        <div class="character-display" id="growthCharacter">
          ğŸ¥š
        </div>
        <div class="character-status" id="characterStatus">
          åµã®çŠ¶æ…‹
        </div>
        <div class="growth-progress">
          <div class="progress-bar">
            <div class="progress-fill" id="growthProgress" style="width: 0%;"></div>
          </div>
          <div class="growth-stage" id="growthStage">
            æˆé•·æ®µéš: 0/5
          </div>
        </div>
        <button class="btn" onclick="tryToGrowCharacter()">ğŸ’ æ„›æƒ…ã‚’æ³¨ã</button>
        <div class="character-message" id="characterMessage">
          åµã«æ„›æƒ…ã‚’æ³¨ã„ã§ãã ã•ã„...
        </div>
      </div>
    </div>

    <div class="games-grid">
      <!-- ã‚²ãƒ¼ãƒ 1: æ¯ã‚Œã‚‹èŠ± -->
      <div class="game-card">
        <h3 class="game-title">ğŸŒ¸ æ¯ã‚Œã‚‹èŠ±</h3>
        <div class="game-area">
          <div class="pet-display" id="flower">ğŸŒ¸</div>
          <div class="status" id="flowerStatus">å…ƒæ°—ãªèŠ±ã§ã™</div>
          <div class="progress-bar">
            <div class="progress-fill" id="flowerHealth" style="width: 100%;"></div>
          </div>
          <div class="care-buttons">
            <button class="btn" onclick="careForFlower('water')">ğŸ’§ æ°´ã‚„ã‚Š</button>
            <button class="btn" onclick="careForFlower('sun')">â˜€ï¸ æ—¥å…‰</button>
            <button class="btn" onclick="careForFlower('fertilizer')">ğŸŒ± è‚¥æ–™</button>
          </div>
          <div class="message" id="flowerMessage">ãŠä¸–è©±ã—ã¦ãã ã•ã„...</div>
        </div>
      </div>

      <!-- ã‚²ãƒ¼ãƒ 2: ã‚ãŒã¾ã¾ãƒšãƒƒãƒˆ -->
      <div class="game-card">
        <h3 class="game-title">ğŸ± ã‚ãŒã¾ã¾ãƒšãƒƒãƒˆ</h3>
        <div class="game-area">
          <div class="pet-display" id="cat">ğŸ˜¾</div>
          <div class="status" id="catStatus">æ©Ÿå«ŒãŒæ‚ªã„</div>
          <div class="progress-bar">
            <div class="progress-fill" id="catMood" style="width: 20%;"></div>
          </div>
          <div class="care-buttons">
            <button class="btn" onclick="careForCat('food')">ğŸ– é¤Œ</button>
            <button class="btn" onclick="careForCat('play')">ğŸ¾ éŠã¶</button>
            <button class="btn" onclick="careForCat('pet')">âœ‹ ãªã§ã‚‹</button>
          </div>
          <div class="message" id="catMessage">ä½•ã‚’ã—ã¦ã‚‚æ°—ã«å…¥ã‚‰ãªã„...</div>
        </div>
      </div>

      <!-- ã‚²ãƒ¼ãƒ 3: è…ã‚‹é‡èœ -->
      <div class="game-card">
        <h3 class="game-title">ğŸ… è…ã‚‹é‡èœ</h3>
        <div class="game-area">
          <div class="pet-display" id="vegetable">ğŸ…</div>
          <div class="status" id="vegetableStatus">æ–°é®®ãªé‡èœ</div>
          <div class="progress-bar">
            <div class="progress-fill" id="vegetableFreshness" style="width: 100%;"></div>
          </div>
          <div class="care-buttons">
            <button class="btn" onclick="careForVegetable('wash')">ğŸš¿ æ´—ã†</button>
            <button class="btn" onclick="careForVegetable('cool')">â„ï¸ å†·ã‚„ã™</button>
            <button class="btn" onclick="careForVegetable('wrap')">ğŸ“¦ åŒ…ã‚€</button>
          </div>
          <div class="message" id="vegetableMessage">æ™‚é–“ãŒçµŒã¤ã¨è…ã‚Šã¾ã™...</div>
        </div>
      </div>

      <!-- ã‚²ãƒ¼ãƒ 4: æ°—ã¾ãã‚Œé‡‘é­š -->
      <div class="game-card">
        <h3 class="game-title">ğŸŸ æ°—ã¾ãã‚Œé‡‘é­š</h3>
        <div class="game-area">
          <div class="pet-display" id="fish">ğŸŸ</div>
          <div class="status" id="fishStatus">å…ƒæ°—ãŒãªã„</div>
          <div class="progress-bar">
            <div class="progress-fill" id="fishEnergy" style="width: 30%;"></div>
          </div>
          <div class="care-buttons">
            <button class="btn" onclick="careForFish('feed')">ğŸ¤ é¤Œã‚„ã‚Š</button>
            <button class="btn" onclick="careForFish('clean')">ğŸ§½ æ°´æ§½æƒé™¤</button>
            <button class="btn" onclick="careForFish('oxygen')">ğŸ’¨ é…¸ç´ </button>
          </div>
          <div class="message" id="fishMessage">é¤Œã‚’ã‚ã’ã¦ã‚‚å…ƒæ°—ã«ãªã‚Šã¾ã›ã‚“...</div>
        </div>
      </div>

      <!-- ã‚²ãƒ¼ãƒ 5: è‚²ãŸãªã„æ¤ç‰© -->
      <div class="game-card">
        <h3 class="game-title">ğŸŒ± è‚²ãŸãªã„æ¤ç‰©</h3>
        <div class="game-area">
          <div class="pet-display" id="plant">ğŸŒ±</div>
          <div class="status" id="plantStatus">å°ã•ãªèŠ½</div>
          <div class="progress-bar">
            <div class="progress-fill" id="plantGrowth" style="width: 10%;"></div>
          </div>
          <div class="care-buttons">
            <button class="btn" onclick="careForPlant('water')">ğŸ’§ æ°´</button>
            <button class="btn" onclick="careForPlant('nutrients')">ğŸ§ª æ „é¤Š</button>
            <button class="btn" onclick="careForPlant('talk')">ğŸ’¬ è©±ã—ã‹ã‘ã‚‹</button>
          </div>
          <div class="message" id="plantMessage">ãªãœã‹æˆé•·ã—ã¾ã›ã‚“...</div>
        </div>
      </div>

      <!-- ã‚²ãƒ¼ãƒ 6: åæŠ—çš„ã²ã‚ˆã“ -->
      <div class="game-card">
        <h3 class="game-title">ğŸ£ åæŠ—çš„ã²ã‚ˆã“</h3>
        <div class="game-area">
          <div class="pet-display" id="chick">ğŸ£</div>
          <div class="status" id="chickStatus">åæŠ—æœŸ</div>
          <div class="progress-bar">
            <div class="progress-fill" id="chickLove" style="width: 5%;"></div>
          </div>
          <div class="care-buttons">
            <button class="btn" onclick="careForChick('feed')">ğŸŒ¾ é¤Œ</button>
            <button class="btn" onclick="careForChick('warm')">ğŸ”¥ æ¸©ã‚ã‚‹</button>
            <button class="btn" onclick="careForChick('sing')">ğŸµ æ­Œã†</button>
          </div>
          <div class="message" id="chickMessage">æ„›æƒ…ã‚’ã‹ã‘ã¦ã‚‚æ‡ãã¾ã›ã‚“...</div>
        </div>
      </div>

      <!-- ã‚²ãƒ¼ãƒ 7: é€ƒã’ã‚‹è¶ã€… -->
      <div class="game-card">
        <h3 class="game-title">ğŸ¦‹ é€ƒã’ã‚‹è¶ã€…</h3>
        <div class="game-area">
          <div class="pet-display" id="butterfly">ğŸ¦‹</div>
          <div class="status" id="butterflyStatus">è­¦æˆ’ä¸­</div>
          <div class="progress-bar">
            <div class="progress-fill" id="butterflyTrust" style="width: 15%;"></div>
          </div>
          <div class="care-buttons">
            <button class="btn" onclick="careForButterfly('nectar')">ğŸ¯ èœœ</button>
            <button class="btn" onclick="careForButterfly('gentle')">ğŸ¤² å„ªã—ã</button>
            <button class="btn" onclick="careForButterfly('flowers')">ğŸŒº èŠ±</button>
          </div>
          <div class="message" id="butterflyMessage">è¿‘ã¥ãã¨é€ƒã’ã¦ã—ã¾ã„ã¾ã™...</div>
        </div>
      </div>

      <!-- ã‚²ãƒ¼ãƒ 8: å‹•ã‹ãªã„äº€ -->
      <div class="game-card">
        <h3 class="game-title">ğŸ¢ å‹•ã‹ãªã„äº€</h3>
        <div class="game-area">
          <div class="pet-display" id="turtle">ğŸ¢</div>
          <div class="status" id="turtleStatus">ç„¡åå¿œ</div>
          <div class="progress-bar">
            <div class="progress-fill" id="turtleActivity" style="width: 0%;"></div>
          </div>
          <div class="care-buttons">
            <button class="btn" onclick="careForTurtle('lettuce')">ğŸ¥¬ ãƒ¬ã‚¿ã‚¹</button>
            <button class="btn" onclick="careForTurtle('sun')">â˜€ï¸ æ—¥å…‰æµ´</button>
            <button class="btn" onclick="careForTurtle('poke')">ğŸ‘† ã¤ã¤ã</button>
          </div>
          <div class="message" id="turtleMessage">ä½•ã‚’ã—ã¦ã‚‚å‹•ãã¾ã›ã‚“...</div>
        </div>
      </div>

      <!-- ã‚²ãƒ¼ãƒ 9: ãƒˆã‚²ãƒˆã‚²ã‚µãƒœãƒ†ãƒ³ -->
      <div class="game-card">
        <h3 class="game-title">ğŸŒµ ãƒˆã‚²ãƒˆã‚²ã‚µãƒœãƒ†ãƒ³</h3>
        <div class="game-area">
          <div class="pet-display" id="cactus">ğŸŒµ</div>
          <div class="status" id="cactusStatus">ãƒˆã‚²ãƒˆã‚²</div>
          <div class="progress-bar">
            <div class="progress-fill" id="cactusFriendliness" style="width: 0%;"></div>
          </div>
          <div class="care-buttons">
            <button class="btn" onclick="careForCactus('water')">ğŸ’§ å°‘ã—æ°´</button>
            <button class="btn" onclick="careForCactus('touch')">âœ‹ è§¦ã‚‹</button>
            <button class="btn" onclick="careForCactus('decorate')">ğŸ€ é£¾ã‚‹</button>
          </div>
          <div class="message" id="cactusMessage">è§¦ã‚‹ã¨ç—›ã„æ€ã„ã‚’ã—ã¾ã™...</div>
        </div>
      </div>

      <!-- ã‚²ãƒ¼ãƒ 10: éš ã‚Œã‚‹ã‚¦ã‚µã‚® -->
      <div class="game-card">
        <h3 class="game-title">ğŸ° éš ã‚Œã‚‹ã‚¦ã‚µã‚®</h3>
        <div class="game-area">
          <div class="pet-display" id="rabbit">ğŸ°</div>
          <div class="status" id="rabbitStatus">è­¦æˆ’ä¸­</div>
          <div class="progress-bar">
            <div class="progress-fill" id="rabbitComfort" style="width: 10%;"></div>
          </div>
          <div class="care-buttons">
            <button class="btn" onclick="careForRabbit('carrot')">ğŸ¥• äººå‚</button>
            <button class="btn" onclick="careForRabbit('quiet')">ğŸ¤« é™ã‹ã«</button>
            <button class="btn" onclick="careForRabbit('approach')">ğŸ‘£ è¿‘ã¥ã</button>
          </div>
          <div class="message" id="rabbitMessage">è¿‘ã¥ãã¨éš ã‚Œã¦ã—ã¾ã„ã¾ã™...</div>
        </div>
      </div>
    </div>

    <!-- åˆ†æçµæœãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div class="analysis-modal" id="analysisModal">
      <div class="analysis-content">
        <h2 class="analysis-title">ğŸ“Š ã¤ã¾ã‚‰ãªã„åº¦åˆ†æçµæœ</h2>
        <div class="personality-result" id="personalityResult">ğŸ¤” åˆ†æä¸­...</div>
        <div class="analysis-details" id="analysisDetails"></div>
        <button class="close-btn" onclick="closeAnalysis()">é–‰ã˜ã‚‹</button>
      </div>
    </div>
  </div>

  <script>
    // ã‚²ãƒ¼ãƒ çŠ¶æ…‹ç®¡ç†
    let gameStates = {
      flower: { health: 100, careCount: 0 },
      cat: { mood: 20, careCount: 0 },
      vegetable: { freshness: 100, startTime: Date.now() },
      fish: { energy: 30, careCount: 0 },
      plant: { growth: 10, careCount: 0 },
      chick: { love: 5, careCount: 0 },
      butterfly: { trust: 15, careCount: 0 },
      turtle: { activity: 0, careCount: 0 },
      cactus: { friendliness: 0, careCount: 0 },
      rabbit: { comfort: 10, careCount: 0 }
    };

    // ã¤ã¾ã‚‰ãªã„åº¦ã¨ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æˆé•·ã®çŠ¶æ…‹
    let boredomState = {
      level: 0,
      totalCareActions: 0,
      startTime: Date.now()
    };

    let characterState = {
      stage: 0,
      growth: 0,
      loveAttempts: 0,
      maxStage: 5,
      stages: [
        { emoji: 'ğŸ¥š', name: 'åµã®çŠ¶æ…‹', message: 'åµã«æ„›æƒ…ã‚’æ³¨ã„ã§ãã ã•ã„...' },
        { emoji: 'ğŸ£', name: 'ã²ã‚ˆã“èª•ç”Ÿ', message: 'ã²ã‚ˆã“ãŒç”Ÿã¾ã‚Œã¾ã—ãŸï¼ã§ã‚‚...' },
        { emoji: 'ğŸ¤', name: 'æˆé•·ä¸­', message: 'å°‘ã—å¤§ãããªã‚Šã¾ã—ãŸãŒ...' },
        { emoji: 'ğŸ”', name: 'å¤§äººã®é¶', message: 'ç«‹æ´¾ãªé¶ã«ãªã‚Šã¾ã—ãŸï¼ã—ã‹ã—...' },
        { emoji: 'ğŸ—', name: 'æ–™ç†å®Œæˆ', message: 'æœ€çµ‚çš„ã«æ–™ç†ã«ãªã£ã¦ã—ã¾ã„ã¾ã—ãŸ...' },
        { emoji: 'ğŸ’€', name: 'éª¨ã ã‘', message: 'éª¨ã ã‘ãŒæ®‹ã‚Šã¾ã—ãŸ...' }
      ]
    };

    // ã‚²ãƒ¼ãƒ 1: æ¯ã‚Œã‚‹èŠ±
    function careForFlower(action) {
      gameStates.flower.careCount++;
      boredomState.totalCareActions++;

      // ã©ã‚“ãªãŠä¸–è©±ã‚’ã—ã¦ã‚‚å¾ã€…ã«æ¯ã‚Œã‚‹
      gameStates.flower.health = Math.max(0, gameStates.flower.health - Math.random() * 15 - 5);

      const messages = [
        "æ°´ã‚’ã‚ã’ãŸã®ã«å…ƒæ°—ãŒã‚ã‚Šã¾ã›ã‚“...",
        "æ—¥å…‰ã«å½“ã¦ã¦ã‚‚æ¯ã‚Œã¦ã„ãã¾ã™...",
        "è‚¥æ–™ã‚’ã‚ã’ã¦ã‚‚åŠ¹æœãŒã‚ã‚Šã¾ã›ã‚“...",
        "ãªãœã‹æ¯ã‚Œã¦ã—ã¾ã„ã¾ã™..."
      ];

      document.getElementById('flowerMessage').textContent =
        messages[Math.floor(Math.random() * messages.length)];
      document.getElementById('flowerHealth').style.width = gameStates.flower.health + '%';

      if (gameStates.flower.health <= 0) {
        document.getElementById('flower').textContent = 'ğŸ¥€';
        document.getElementById('flower').classList.add('wilted');
        document.getElementById('flowerStatus').textContent = 'æ¯ã‚Œã¦ã—ã¾ã„ã¾ã—ãŸ';
        document.getElementById('flowerMessage').textContent =
          'ã©ã‚“ãªã«ãŠä¸–è©±ã—ã¦ã‚‚æ¯ã‚Œã¦ã—ã¾ã„ã¾ã—ãŸ...';
      } else if (gameStates.flower.health < 30) {
        document.getElementById('flower').classList.add('sad');
        document.getElementById('flowerStatus').textContent = 'ã—ãŠã‚Œã¦ã„ã¾ã™';
      }
    }

    // ã‚²ãƒ¼ãƒ 2: ã‚ãŒã¾ã¾ãƒšãƒƒãƒˆ
    function careForCat(action) {
      gameStates.cat.careCount++;
      boredomState.totalCareActions++;

      // ä½•ã‚’ã—ã¦ã‚‚æ©Ÿå«ŒãŒæ‚ªããªã‚‹
      gameStates.cat.mood = Math.max(0, gameStates.cat.mood - Math.random() * 10 - 2);

      const messages = [
        "é¤Œã‚’ã‚ã’ã¦ã‚‚ä¸æ©Ÿå«Œã§ã™...",
        "éŠã‚“ã§ã‚ã’ã¦ã‚‚æ€’ã£ã¦ã„ã¾ã™...",
        "ãªã§ã¦ã‚‚å«ŒãŒã‚‰ã‚Œã¾ã™...",
        "ä½•ã‚’ã—ã¦ã‚‚æ°—ã«å…¥ã‚Šã¾ã›ã‚“..."
      ];

      document.getElementById('catMessage').textContent =
        messages[Math.floor(Math.random() * messages.length)];
      document.getElementById('catMood').style.width = gameStates.cat.mood + '%';
      document.getElementById('cat').classList.add('angry');

      setTimeout(() => {
        document.getElementById('cat').classList.remove('angry');
      }, 500);
    }

    // ã‚²ãƒ¼ãƒ 3: è…ã‚‹é‡èœ
    function careForVegetable(action) {
      if (action !== 'time') {
        boredomState.totalCareActions++;
      }

      // æ™‚é–“çµŒéã§è…ã‚‹
      const elapsed = (Date.now() - gameStates.vegetable.startTime) / 1000;
      gameStates.vegetable.freshness = Math.max(0, 100 - elapsed * 2);

      const messages = [
        "æ´—ã£ã¦ã‚‚è…ã£ã¦ã„ãã¾ã™...",
        "å†·ã‚„ã—ã¦ã‚‚æ–°é®®ã•ãŒå¤±ã‚ã‚Œã¾ã™...",
        "åŒ…ã‚“ã§ã‚‚è…æ•—ãŒé€²ã¿ã¾ã™...",
        "æ™‚é–“ãŒçµŒã¤ã¨å¿…ãšè…ã‚Šã¾ã™..."
      ];

      document.getElementById('vegetableMessage').textContent =
        messages[Math.floor(Math.random() * messages.length)];
      document.getElementById('vegetableFreshness').style.width =
        gameStates.vegetable.freshness + '%';

      if (gameStates.vegetable.freshness <= 0) {
        document.getElementById('vegetable').textContent = 'ğŸ¤¢';
        document.getElementById('vegetableStatus').textContent = 'è…ã£ã¦ã—ã¾ã„ã¾ã—ãŸ';
      } else if (gameStates.vegetable.freshness < 30) {
        document.getElementById('vegetable').classList.add('sad');
        document.getElementById('vegetableStatus').textContent = 'è…ã‚Šã‹ã‘ã¦ã„ã¾ã™';
      }
    }

    // ã‚²ãƒ¼ãƒ 4: æ°—ã¾ãã‚Œé‡‘é­š
    function careForFish(action) {
      gameStates.fish.careCount++;
      boredomState.totalCareActions++;

      // ãƒ©ãƒ³ãƒ€ãƒ ã«å…ƒæ°—åº¦ãŒå¤‰ã‚ã‚‹ï¼ˆä¸»ã«ä¸‹ãŒã‚‹ï¼‰
      const change = Math.random() * 20 - 15; // -15ã€œ+5
      gameStates.fish.energy =
        Math.max(0, Math.min(100, gameStates.fish.energy + change));

      const messages = [
        "é¤Œã‚’ã‚ã’ã¦ã‚‚å…ƒæ°—ã«ãªã‚Šã¾ã›ã‚“...",
        "æ°´æ§½ã‚’æƒé™¤ã—ã¦ã‚‚å¤‰ã‚ã‚Šã¾ã›ã‚“...",
        "é…¸ç´ ã‚’å…¥ã‚Œã¦ã‚‚åŠ¹æœãŒã‚ã‚Šã¾ã›ã‚“...",
        "æ°—ã¾ãã‚Œã§å…ƒæ°—åº¦ãŒå¤‰ã‚ã‚Šã¾ã™..."
      ];

      document.getElementById('fishMessage').textContent =
        messages[Math.floor(Math.random() * messages.length)];
      document.getElementById('fishEnergy').style.width =
        gameStates.fish.energy + '%';

      if (gameStates.fish.energy < 20) {
        document.getElementById('fish').classList.add('sad');
        document.getElementById('fishStatus').textContent = 'ãã£ãŸã‚Šã—ã¦ã„ã¾ã™';
      }
    }

    // ã‚²ãƒ¼ãƒ 5: è‚²ãŸãªã„æ¤ç‰©
    function careForPlant(action) {
      gameStates.plant.careCount++;

      // æˆé•·ã—ãªã„ï¼ˆã‚€ã—ã‚å°‘ã—é€€åŒ–ã™ã‚‹ï¼‰
      gameStates.plant.growth =
        Math.max(5, gameStates.plant.growth - Math.random() * 2);

      const messages = [
        "æ°´ã‚’ã‚ã’ã¦ã‚‚æˆé•·ã—ã¾ã›ã‚“...",
        "æ „é¤Šã‚’ã‚ã’ã¦ã‚‚å¤‰ã‚ã‚Šã¾ã›ã‚“...",
        "è©±ã—ã‹ã‘ã¦ã‚‚åå¿œãŒã‚ã‚Šã¾ã›ã‚“...",
        "ãªãœã‹æˆé•·ãŒæ­¢ã¾ã£ã¦ã„ã¾ã™..."
      ];

      document.getElementById('plantMessage').textContent =
        messages[Math.floor(Math.random() * messages.length)];
      document.getElementById('plantGrowth').style.width =
        gameStates.plant.growth + '%';
      document.getElementById('plantStatus').textContent = 'æˆé•·ãŒæ­¢ã¾ã£ã¦ã„ã¾ã™';
    }

    // ã‚²ãƒ¼ãƒ 6: åæŠ—çš„ã²ã‚ˆã“
    function careForChick(action) {
      gameStates.chick.careCount++;

      // æ„›æƒ…åº¦ãŒä¸‹ãŒã‚‹
      gameStates.chick.love =
        Math.max(0, gameStates.chick.love - Math.random() * 3);

      const messages = [
        "é¤Œã‚’ã‚ã’ã¦ã‚‚æ‡ãã¾ã›ã‚“...",
        "æ¸©ã‚ã¦ã‚‚åæŠ—çš„ã§ã™...",
        "æ­Œã£ã¦ã‚ã’ã¦ã‚‚ç„¡è¦–ã•ã‚Œã¾ã™...",
        "æ„›æƒ…ã‚’ã‹ã‘ã¦ã‚‚æ‡ã‹ãªã„..."
      ];

      document.getElementById('chickMessage').textContent =
        messages[Math.floor(Math.random() * messages.length)];
      document.getElementById('chickLove').style.width =
        gameStates.chick.love + '%';
      document.getElementById('chick').classList.add('angry');

      setTimeout(() => {
        document.getElementById('chick').classList.remove('angry');
      }, 500);
    }

    // ã‚²ãƒ¼ãƒ 7: é€ƒã’ã‚‹è¶ã€…
    function careForButterfly(action) {
      gameStates.butterfly.careCount++;

      // ä¿¡é ¼åº¦ãŒä¸‹ãŒã‚‹
      gameStates.butterfly.trust =
        Math.max(0, gameStates.butterfly.trust - Math.random() * 5);

      const messages = [
        "èœœã‚’ã‚ã’ã¦ã‚‚é€ƒã’ã‚‰ã‚Œã¾ã™...",
        "å„ªã—ãã—ã¦ã‚‚è­¦æˆ’ã•ã‚Œã¾ã™...",
        "èŠ±ã‚’ç”¨æ„ã—ã¦ã‚‚è¿‘ã¥ãã¾ã›ã‚“...",
        "ã©ã‚“ã©ã‚“é€ƒã’ã¦ã„ãã¾ã™..."
      ];

      document.getElementById('butterflyMessage').textContent =
        messages[Math.floor(Math.random() * messages.length)];
      document.getElementById('butterflyTrust').style.width =
        gameStates.butterfly.trust + '%';

      document.getElementById('butterfly').classList.add('hidden');
      setTimeout(() => {
        document.getElementById('butterfly').classList.remove('hidden');
      }, 1000);
    }

    // ã‚²ãƒ¼ãƒ 8: å‹•ã‹ãªã„äº€
    function careForTurtle(action) {
      gameStates.turtle.careCount++;

      // æ´»å‹•åº¦ã¯å¸¸ã«0
      gameStates.turtle.activity = 0;

      const messages = [
        "ãƒ¬ã‚¿ã‚¹ã‚’ã‚ã’ã¦ã‚‚å‹•ãã¾ã›ã‚“...",
        "æ—¥å…‰æµ´ã•ã›ã¦ã‚‚åå¿œãªã—...",
        "ã¤ã¤ã„ã¦ã‚‚ç„¡åå¿œã§ã™...",
        "å®Œå…¨ã«å‹•ãã¾ã›ã‚“..."
      ];

      document.getElementById('turtleMessage').textContent =
        messages[Math.floor(Math.random() * messages.length)];
      document.getElementById('turtleActivity').style.width = '0%';
      document.getElementById('turtleStatus').textContent = 'å®Œå…¨ã«ç„¡åå¿œ';
    }

    // ã‚²ãƒ¼ãƒ 9: ãƒˆã‚²ãƒˆã‚²ã‚µãƒœãƒ†ãƒ³
    function careForCactus(action) {
      gameStates.cactus.careCount++;

      // è¦ªã—ã¿ã‚„ã™ã•ã¯å¸¸ã«0
      gameStates.cactus.friendliness = 0;

      let message = "";
      if (action === 'touch') {
        message = "è§¦ã£ãŸã‚‰ç—›ã„ï¼ãƒˆã‚²ãŒåˆºã•ã‚Šã¾ã—ãŸ...";
        document.getElementById('cactus').classList.add('angry');
        setTimeout(() => {
          document.getElementById('cactus').classList.remove('angry');
        }, 500);
      } else {
        const messages = [
          "æ°´ã‚’ã‚ã’ã¦ã‚‚ãƒˆã‚²ãƒˆã‚²ã§ã™...",
          "é£¾ã£ã¦ã‚‚ãƒˆã‚²ãŒç—›ã„ã§ã™...",
          "è¿‘ã¥ãã®ã‚‚å±é™ºã§ã™..."
        ];
        message = messages[Math.floor(Math.random() * messages.length)];
      }

      document.getElementById('cactusMessage').textContent = message;
      document.getElementById('cactusFriendliness').style.width = '0%';
    }

    // ã‚²ãƒ¼ãƒ 10: éš ã‚Œã‚‹ã‚¦ã‚µã‚®
    function careForRabbit(action) {
      gameStates.rabbit.careCount++;

      // å¿«é©åº¦ãŒä¸‹ãŒã‚‹
      gameStates.rabbit.comfort =
        Math.max(0, gameStates.rabbit.comfort - Math.random() * 5);

      const messages = [
        "äººå‚ã‚’ã‚ã’ã¦ã‚‚éš ã‚Œã¾ã™...",
        "é™ã‹ã«ã—ã¦ã‚‚è­¦æˆ’ã•ã‚Œã¾ã™...",
        "è¿‘ã¥ãã¨é€ƒã’ã¦ã—ã¾ã„ã¾ã™...",
        "ã©ã‚“ã©ã‚“éš ã‚Œã¦ã„ãã¾ã™..."
      ];

      document.getElementById('rabbitMessage').textContent =
        messages[Math.floor(Math.random() * messages.length)];
      document.getElementById('rabbitComfort').style.width =
        gameStates.rabbit.comfort + '%';

      document.getElementById('rabbit').classList.add('hidden');
      setTimeout(() => {
        document.getElementById('rabbit').classList.remove('hidden');
      }, 1500);
    }

    // ã¤ã¾ã‚‰ãªã„åº¦ã‚’æ›´æ–°
    function updateBoredom() {
      let totalDisappointment = 0;

      if (gameStates.flower.health <= 0) totalDisappointment += 20;
      else if (gameStates.flower.health < 50) totalDisappointment += 10;

      if (gameStates.cat.mood <= 10) totalDisappointment += 15;

      if (gameStates.vegetable.freshness <= 0) totalDisappointment += 15;

      if (gameStates.fish.energy <= 20) totalDisappointment += 10;

      if (gameStates.plant.careCount > 5 && gameStates.plant.growth <= 10)
        totalDisappointment += 10;

      if (gameStates.chick.careCount > 3 && gameStates.chick.love <= 5)
        totalDisappointment += 10;

      if (gameStates.butterfly.trust <= 5) totalDisappointment += 10;

      if (gameStates.turtle.careCount > 3) totalDisappointment += 10;

      if (gameStates.cactus.careCount > 2) totalDisappointment += 10;

      if (gameStates.rabbit.comfort <= 5) totalDisappointment += 10;

      boredomState.level = Math.min(100, totalDisappointment);

      document.getElementById('boredomFill').style.width =
        boredomState.level + '%';

      let levelText = '';
      if (boredomState.level < 20)
        levelText = boredomState.level + '% - ã¾ã æ¥½ã—ã„';
      else if (boredomState.level < 40)
        levelText = boredomState.level + '% - å°‘ã—ã¤ã¾ã‚‰ãªã„';
      else if (boredomState.level < 60)
        levelText = boredomState.level + '% - ã‹ãªã‚Šã¤ã¾ã‚‰ãªã„';
      else if (boredomState.level < 80)
        levelText = boredomState.level + '% - ã¨ã¦ã‚‚ã¤ã¾ã‚‰ãªã„';
      else
        levelText = boredomState.level + '% - çµ¶æœ›çš„ã«ã¤ã¾ã‚‰ãªã„';

      document.getElementById('boredomLevel').textContent = levelText;
    }

    // ã¤ã¾ã‚‰ãªã„åº¦ã‚¸ãƒ£ãƒƒã‚¸
    function judgeBoredom() {
      updateBoredom();

      const messages = [
        "ç¾åœ¨ã®ã¤ã¾ã‚‰ãªã•ã‚’æ¸¬å®šä¸­...",
        "ãŠä¸–è©±ã®åŠ¹æœã‚’åˆ†æä¸­...",
        "å¤±æœ›ãƒ¬ãƒ™ãƒ«ã‚’è¨ˆç®—ä¸­...",
        "ã¤ã¾ã‚‰ãªã„åº¦ãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸï¼"
      ];

      let messageIndex = 0;
      const interval = setInterval(() => {
        document.getElementById('boredomLevel').textContent =
          messages[messageIndex];
        messageIndex++;

        if (messageIndex >= messages.length) {
          clearInterval(interval);
          updateBoredom();
        }
      }, 800);
    }

    // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æˆé•·
    function tryToGrowCharacter() {
      characterState.loveAttempts++;

      const growthChance = Math.random();

      if (growthChance < 0.3 && characterState.stage < characterState.maxStage) {
        characterState.stage++;
        characterState.growth =
          (characterState.stage / characterState.maxStage) * 100;

        const currentStage = characterState.stages[characterState.stage];
        document.getElementById('growthCharacter').textContent =
          currentStage.emoji;
        document.getElementById('characterStatus').textContent =
          currentStage.name;
        document.getElementById('characterMessage').textContent =
          currentStage.message;

        if (characterState.stage >= characterState.maxStage) {
          document.getElementById('characterMessage').textContent =
            'æœ€çµ‚æ®µéšã«åˆ°é”...ã§ã‚‚çµæœã¯...';
        }
      } else {
        const failMessages = [
          "æ„›æƒ…ã‚’æ³¨ã„ã§ã‚‚å¤‰åŒ–ãŒã‚ã‚Šã¾ã›ã‚“...",
          "ãªã‹ãªã‹æˆé•·ã—ã¦ãã‚Œã¾ã›ã‚“...",
          "ã‚‚ã£ã¨æ„›æƒ…ãŒå¿…è¦ãªã‚ˆã†ã§ã™...",
          "æˆé•·ãŒæ­¢ã¾ã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™...",
          "æ„›æƒ…ãŒè¶³ã‚Šãªã„ã®ã§ã—ã‚‡ã†ã‹..."
        ];

        document.getElementById('characterMessage').textContent =
          failMessages[Math.floor(Math.random() * failMessages.length)];
      }

      document.getElementById('growthProgress').style.width =
        characterState.growth + '%';
      document.getElementById('growthStage').textContent =
        `æˆé•·æ®µéš: ${characterState.stage}/${characterState.maxStage} (è©¦è¡Œå›æ•°: ${characterState.loveAttempts})`;
    }

    // æœ€çµ‚åˆ†æè¡¨ç¤º
    function showAnalysis() {
      updateBoredom();

      const personalities = [
        {
          type: "ğŸ¤¡ ãŠä¸–è©±ãƒãƒ‹ã‚¢",
          condition: () => boredomState.totalCareActions > 50,
          description:
            "ã©ã‚“ãªã«å ±ã‚ã‚Œãªãã¦ã‚‚ãŠä¸–è©±ã‚’ç¶šã‘ã‚‹çŒ®èº«çš„ãªæ€§æ ¼ã€‚ã§ã‚‚çµæœã¯æœŸå¾…ã—ãªã„æ–¹ãŒã„ã„ã‹ã‚‚..."
        },
        {
          type: "ğŸ˜¤ å®Œç’§ä¸»ç¾©è€…",
          condition: () => characterState.loveAttempts > 20,
          description:
            "ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’å®Œç’§ã«è‚²ã¦ã‚ˆã†ã¨ã™ã‚‹æ€§æ ¼ã€‚ã§ã‚‚ç¾å®Ÿã¯å³ã—ã„ã§ã™..."
        },
        {
          type: "ğŸ˜®â€ğŸ’¨ è«¦ã‚ã®é”äºº",
          condition: () => boredomState.level > 80,
          description:
            "ã¤ã¾ã‚‰ãªã„ç¾å®Ÿã‚’å—ã‘å…¥ã‚Œã‚‹é”è¦³ã—ãŸæ€§æ ¼ã€‚æ‚Ÿã‚Šã‚’é–‹ã„ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“..."
        },
        {
          type: "ğŸ¯ ãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ£ãƒ¼",
          condition: () => boredomState.level < 30,
          description:
            "ã¾ã å¸Œæœ›ã‚’æ¨ã¦ã¦ã„ãªã„å‰å‘ããªæ€§æ ¼ã€‚ã§ã‚‚ç¾å®Ÿã¯ç”˜ãã‚ã‚Šã¾ã›ã‚“..."
        },
        {
          type: "ğŸ¤” åˆ†æå®¶",
          condition: () => true,
          description:
            "ã¤ã¾ã‚‰ãªã„çµæœã‚’å†·é™ã«åˆ†æã™ã‚‹æ€§æ ¼ã€‚ã§ã‚‚åˆ†æã—ãŸã¨ã“ã‚ã§çµæœã¯å¤‰ã‚ã‚Šã¾ã›ã‚“..."
        }
      ];

      const personality =
        personalities.find(p => p.condition()) || personalities[personalities.length - 1];

      document.getElementById('personalityResult').innerHTML =
        personality.type;

      const analysisHTML = `
        <h3>ğŸ“ˆ è©³ç´°åˆ†æ</h3>
        <p><strong>ã¤ã¾ã‚‰ãªã„åº¦:</strong> ${boredomState.level}%</p>
        <p><strong>ç·ãŠä¸–è©±å›æ•°:</strong> ${boredomState.totalCareActions}å›</p>
        <p><strong>ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æˆé•·æ®µéš:</strong> ${characterState.stage}/${characterState.maxStage}</p>
        <p><strong>æ„›æƒ…æ³¨å…¥å›æ•°:</strong> ${characterState.loveAttempts}å›</p>
        <p><strong>ãƒ—ãƒ¬ã‚¤æ™‚é–“:</strong> ${Math.floor((Date.now() - boredomState.startTime) / 1000)}ç§’</p>

        <h3>ğŸ”® æ€§æ ¼è¨ºæ–­</h3>
        <p>${personality.description}</p>

        <h3>ğŸ’­ ç·è©•</h3>
        <p>ã‚ãªãŸã¯${boredomState.totalCareActions}å›ã‚‚ãŠä¸–è©±ã‚’ã—ã¾ã—ãŸãŒã€çµæœã¯æœŸå¾…é€šã‚Šã«ã„ãã¾ã›ã‚“ã§ã—ãŸã€‚
        ã“ã‚ŒãŒã¤ã¾ã‚‰ãªã„ãŠä¸–è©±ã‚²ãƒ¼ãƒ ã®é†é†å‘³ã§ã™ã€‚ç¾å®Ÿã¯å³ã—ãã€åŠªåŠ›ãŒå¿…ãšå ±ã‚ã‚Œã‚‹ã¨ã¯é™ã‚Šã¾ã›ã‚“ã€‚
        ã§ã‚‚ã€ãã‚Œã§ã‚‚ç¶šã‘ã‚‹ã‚ãªãŸã®å§¿å‹¢ã¯ç´ æ™´ã‚‰ã—ã„...ã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p>
      `;

      document.getElementById('analysisDetails').innerHTML = analysisHTML;
      document.getElementById('analysisModal').style.display = 'flex';
    }

    function closeAnalysis() {
      document.getElementById('analysisModal').style.display = 'none';
    }

    // é‡èœã®è…æ•—ã‚’æ™‚é–“ã§é€²è¡Œ
    setInterval(() => {
      careForVegetable('time');
    }, 5000);

    // ã¤ã¾ã‚‰ãªã„åº¦ã‚’å®šæœŸçš„ã«æ›´æ–°
    setInterval(updateBoredom, 3000);
  </script>
</body>
</html>
